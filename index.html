<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#0a1628">
<title>×ª×¤××´×§ - ××¢×¨×›×ª × ×™×”×•×œ ××©×™××•×ª</title>
<link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
  :root {
    --navy: #0a1628;
    --navy-light: #132038;
    --navy-mid: #1a2d4a;
    --blue: #2563eb;
    --blue-light: #3b82f6;
    --blue-glow: rgba(37, 99, 235, 0.15);
    --gold: #f59e0b;
    --green: #10b981;
    --green-light: #34d399;
    --red: #ef4444;
    --gray: #94a3b8;
    --gray-dark: #64748b;
    --text: #e2e8f0;
    --radius: 14px;
    --shadow: 0 4px 24px rgba(0,0,0,0.3);
    --cyan: #06b6d4;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Heebo', sans-serif; background: var(--navy); color: var(--text); min-height: 100vh; overflow-x: hidden; -webkit-tap-highlight-color: transparent; }
  .screen { display: none; min-height: 100vh; padding-bottom: 100px; animation: fadeIn 0.3s ease; }
  .screen.active { display: block; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes shake { 25% { transform: translateX(6px); } 50% { transform: translateX(-6px); } 75% { transform: translateX(4px); } }

  .station-select { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; padding: 30px; background: linear-gradient(160deg, #0a1628 0%, #132038 50%, #0f1d33 100%); position: relative; overflow: hidden; }
  .station-select::before { content: ''; position: absolute; top: -50%; right: -50%; width: 200%; height: 200%; background: radial-gradient(circle at 30% 40%, rgba(37,99,235,0.06) 0%, transparent 50%); pointer-events: none; }
  .logo-area { text-align: center; margin-bottom: 50px; animation: slideUp 0.6s ease; }
  .shield-icon { width: 90px; height: 90px; background: linear-gradient(135deg, var(--blue), #1d4ed8); border-radius: 24px; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; box-shadow: 0 8px 32px rgba(37,99,235,0.3); font-size: 42px; }
  .logo-area h1 { font-size: 32px; font-weight: 800; color: #fff; letter-spacing: -0.5px; }
  .logo-area p { font-size: 15px; color: var(--gray); margin-top: 6px; font-weight: 300; }
  .station-buttons { width: 100%; max-width: 360px; display: flex; flex-direction: column; gap: 16px; animation: slideUp 0.8s ease; }
  .station-btn { background: var(--navy-light); border: 1.5px solid rgba(37,99,235,0.2); border-radius: var(--radius); padding: 22px 24px; display: flex; align-items: center; gap: 16px; cursor: pointer; transition: all 0.25s ease; text-align: right; }
  .station-btn:hover, .station-btn:active { background: var(--navy-mid); border-color: var(--blue); transform: translateY(-2px); box-shadow: 0 8px 30px rgba(37,99,235,0.15); }
  .station-btn .icon { width: 52px; height: 52px; border-radius: 14px; background: linear-gradient(135deg, var(--blue-glow), rgba(37,99,235,0.08)); display: flex; align-items: center; justify-content: center; font-size: 24px; flex-shrink: 0; }
  .station-btn .info h3 { font-size: 18px; font-weight: 700; color: #fff; }
  .station-btn .info p { font-size: 13px; color: var(--gray); margin-top: 3px; }
  .station-btn .arrow { margin-right: auto; color: var(--gray-dark); font-size: 18px; }

  .header { background: var(--navy-light); padding: 16px 20px; display: flex; align-items: center; gap: 14px; position: sticky; top: 0; z-index: 100; border-bottom: 1px solid rgba(255,255,255,0.06); backdrop-filter: blur(12px); }
  .back-btn { background: rgba(255,255,255,0.06); border: none; color: var(--text); width: 38px; height: 38px; border-radius: 10px; font-size: 18px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
  .header-title { font-size: 17px; font-weight: 700; color: #fff; flex: 1; }
  .header-badge { background: var(--blue); color: #fff; font-size: 11px; font-weight: 600; padding: 4px 10px; border-radius: 20px; }
  .admin-gear { background: none; border: none; color: var(--gray-dark); font-size: 20px; cursor: pointer; padding: 4px; }

  .menu-content { padding: 24px 20px; }
  .welcome-card { background: linear-gradient(135deg, var(--blue), #1d4ed8); border-radius: 18px; padding: 26px; margin-bottom: 28px; position: relative; overflow: hidden; }
  .welcome-card::after { content: ''; position: absolute; top: -30%; left: -20%; width: 70%; height: 160%; background: radial-gradient(ellipse, rgba(255,255,255,0.08), transparent); pointer-events: none; }
  .welcome-card h2 { font-size: 22px; font-weight: 800; color: #fff; margin-bottom: 6px; }
  .welcome-card p { font-size: 14px; color: rgba(255,255,255,0.75); font-weight: 300; }
  .menu-grid { display: flex; flex-direction: column; gap: 14px; }
  .menu-card { background: var(--navy-light); border: 1px solid rgba(255,255,255,0.06); border-radius: var(--radius); padding: 22px; display: flex; align-items: center; gap: 18px; cursor: pointer; transition: all 0.25s ease; }
  .menu-card:hover, .menu-card:active { background: var(--navy-mid); transform: translateY(-1px); box-shadow: var(--shadow); }
  .menu-card .card-icon { width: 56px; height: 56px; border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 26px; flex-shrink: 0; }
  .menu-card .card-icon.gold { background: linear-gradient(135deg, rgba(245,158,11,0.15), rgba(245,158,11,0.05)); }
  .menu-card .card-icon.green { background: linear-gradient(135deg, rgba(16,185,129,0.15), rgba(16,185,129,0.05)); }
  .menu-card .card-icon.blue { background: linear-gradient(135deg, rgba(37,99,235,0.15), rgba(37,99,235,0.05)); }
  .menu-card .card-info h3 { font-size: 17px; font-weight: 700; color: #fff; margin-bottom: 4px; }
  .menu-card .card-info p { font-size: 13px; color: var(--gray); line-height: 1.4; }

  .checklist-content { padding: 20px; }
  .checklist-section { margin-bottom: 24px; }
  .section-title { font-size: 14px; font-weight: 600; color: var(--gold); letter-spacing: 0.5px; margin-bottom: 12px; padding-right: 4px; }
  .checklist-item { background: var(--navy-light); border: 1px solid rgba(255,255,255,0.06); border-radius: 12px; padding: 16px 18px; margin-bottom: 10px; display: flex; align-items: flex-start; gap: 14px; cursor: pointer; transition: all 0.2s ease; }
  .checklist-item:active { transform: scale(0.98); }
  .checklist-item.checked { background: rgba(16,185,129,0.06); border-color: rgba(16,185,129,0.2); }
  .check-box { width: 26px; height: 26px; border-radius: 8px; border: 2px solid var(--gray-dark); display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 1px; transition: all 0.25s ease; font-size: 14px; color: transparent; }
  .checklist-item.checked .check-box { background: var(--green); border-color: var(--green); color: #fff; }
  .check-text { flex: 1; }
  .check-text h4 { font-size: 15px; font-weight: 600; color: #fff; line-height: 1.5; }
  .checklist-item.checked .check-text h4 { color: var(--gray); text-decoration: line-through; }
  .check-text p { font-size: 12px; color: var(--gray-dark); margin-top: 4px; line-height: 1.4; }
  .check-time { font-size: 11px; color: var(--green-light); font-weight: 500; white-space: nowrap; }

  .progress-bar-container { background: var(--navy-light); border-radius: 12px; padding: 18px 20px; margin-bottom: 24px; border: 1px solid rgba(255,255,255,0.06); }
  .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
  .progress-header span { font-size: 13px; color: var(--gray); font-weight: 500; }
  .progress-header strong { font-size: 15px; color: var(--green-light); font-weight: 700; }
  .progress-track { height: 8px; background: rgba(255,255,255,0.06); border-radius: 10px; overflow: hidden; }
  .progress-fill { height: 100%; background: linear-gradient(90deg, var(--green), var(--green-light)); border-radius: 10px; transition: width 0.5s ease; }

  .event-card { background: var(--navy-light); border: 1px solid rgba(255,255,255,0.06); border-radius: var(--radius); padding: 20px; margin-bottom: 14px; cursor: pointer; transition: all 0.2s ease; }
  .event-card:active { transform: scale(0.98); }
  .event-card .event-header { display: flex; align-items: center; gap: 14px; margin-bottom: 8px; }
  .event-card .event-icon { width: 44px; height: 44px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 22px; flex-shrink: 0; }
  .event-card h3 { font-size: 16px; font-weight: 700; color: #fff; }
  .event-card > p { font-size: 13px; color: var(--gray); line-height: 1.5; margin-right: 58px; }

  .event-steps-container { padding: 20px; }
  .step-item { display: flex; gap: 16px; margin-bottom: 20px; position: relative; }
  .step-number { width: 34px; height: 34px; border-radius: 50%; background: var(--blue); color: #fff; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 700; flex-shrink: 0; }
  .step-item:not(:last-child)::after { content: ''; position: absolute; right: 16px; top: 38px; bottom: -16px; width: 2px; background: rgba(37,99,235,0.2); }
  .step-content h4 { font-size: 15px; font-weight: 600; color: #fff; margin-bottom: 4px; line-height: 34px; }
  .step-content p { font-size: 13px; color: var(--gray); line-height: 1.6; }

  .info-container { padding: 20px; }
  .info-block { background: var(--navy-light); border: 1px solid rgba(255,255,255,0.06); border-radius: 12px; padding: 18px 20px; margin-bottom: 14px; }
  .info-block h4 { font-size: 14px; font-weight: 700; color: var(--gold); margin-bottom: 10px; line-height: 1.6; }
  .info-block ul { list-style: none; padding: 0; }
  .info-block li { font-size: 14px; color: var(--text); line-height: 1.8; padding-right: 14px; position: relative; }
  .info-block li::before { content: '\2022'; position: absolute; right: 0; color: var(--blue-light); font-weight: bold; }

  .flow-title { font-size: 15px; font-weight: 700; color: var(--gold); text-align: center; margin: 20px 0 14px; }
  .flow-box { background: var(--navy-light); border: 1.5px solid rgba(37,99,235,0.3); border-radius: 12px; padding: 14px 18px; text-align: center; margin: 0 auto 8px; max-width: 310px; font-size: 14px; font-weight: 600; color: #fff; line-height: 1.5; }
  .flow-box.blue-bg { background: var(--blue); border-color: var(--blue); }
  .flow-box.green-bg { background: rgba(16,185,129,0.12); border-color: var(--green); }
  .flow-box.red-bg { background: rgba(239,68,68,0.12); border-color: var(--red); }
  .flow-arrow { text-align: center; color: var(--gray-dark); font-size: 20px; margin: 4px 0; }
  .flow-split { display: flex; justify-content: center; gap: 20px; margin: 8px 0; }
  .flow-split-col { flex: 1; max-width: 145px; }
  .flow-label { text-align: center; font-size: 12px; color: var(--gray); margin-bottom: 6px; font-weight: 600; }
  .flow-list { background: var(--navy-light); border: 1px solid rgba(255,255,255,0.06); border-radius: 12px; padding: 14px 18px; margin: 10px auto 14px; max-width: 330px; }
  .flow-list li { font-size: 13px; color: var(--text); line-height: 1.8; list-style: none; padding-right: 14px; position: relative; }
  .flow-list li::before { content: '\2022'; position: absolute; right: 0; color: var(--blue-light); }

  .profile-content { padding: 20px; }
  .profile-card { background: var(--navy-light); border: 1px solid rgba(255,255,255,0.06); border-radius: var(--radius); padding: 22px; margin-bottom: 16px; }
  .profile-card h3 { font-size: 15px; font-weight: 700; color: var(--gold); margin-bottom: 14px; }
  .profile-row { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.04); }
  .profile-row:last-child { border: none; }
  .profile-row .label { font-size: 13px; color: var(--gray); }
  .profile-row .value { font-size: 14px; font-weight: 600; color: #fff; }
  .profile-row .value.phone { color: var(--blue-light); direction: ltr; }
  .border-tag { display: inline-block; background: rgba(37,99,235,0.1); color: var(--blue-light); font-size: 13px; padding: 6px 12px; border-radius: 8px; margin: 4px 0 4px 8px; line-height: 1.5; }

  .reset-btn { background: rgba(239,68,68,0.1); border: 1px solid rgba(239,68,68,0.2); color: var(--red); font-family: 'Heebo', sans-serif; font-size: 14px; font-weight: 600; padding: 12px 24px; border-radius: 10px; cursor: pointer; width: 100%; margin-top: 10px; }
  .modal-overlay { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 1000; align-items: center; justify-content: center; padding: 20px; }
  .modal-overlay.show { display: flex; }
  .modal-box { background: var(--navy-light); border: 1px solid rgba(255,255,255,0.1); border-radius: 20px; padding: 30px; width: 100%; max-width: 340px; text-align: center; animation: slideUp 0.3s ease; }
  .modal-box h3 { font-size: 20px; font-weight: 700; color: #fff; margin-bottom: 8px; }
  .modal-box p { font-size: 13px; color: var(--gray); margin-bottom: 22px; }
  .pin-input { width: 100%; background: var(--navy); border: 2px solid rgba(255,255,255,0.1); color: #fff; font-family: 'Heebo', sans-serif; font-size: 28px; font-weight: 700; text-align: center; letter-spacing: 12px; padding: 14px; border-radius: 12px; outline: none; margin-bottom: 18px; }
  .pin-input:focus { border-color: var(--blue); }
  .pin-input.error { border-color: var(--red); animation: shake 0.4s ease; }
  .modal-btns { display: flex; gap: 10px; }
  .modal-btns button { flex: 1; padding: 12px; border-radius: 10px; font-family: 'Heebo', sans-serif; font-size: 15px; font-weight: 600; cursor: pointer; border: none; }
  .btn-cancel { background: rgba(255,255,255,0.06); color: var(--gray); }
  .btn-confirm { background: var(--blue); color: #fff; }
  .toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px); background: var(--green); color: #fff; padding: 12px 24px; border-radius: 12px; font-size: 14px; font-weight: 600; z-index: 2000; transition: transform 0.3s ease; white-space: nowrap; }
  .toast.show { transform: translateX(-50%) translateY(0); }
 
  /* ×˜×¤×¡×™× */
  .form-input, .form-select {
    width: 100%;
    background: var(--navy);
    border: 1px solid rgba(255,255,255,0.1);
    color: #fff;
    padding: 12px;
    border-radius: 10px;
    font-family: 'Heebo', sans-serif;
    font-size: 16px;
    outline: none;
    margin-bottom: 10px;
  }
  .form-input:focus, .form-select:focus {
    border-color: var(--blue);
  }
  
  /* ×›×¨×˜×™×¡ ×¢×¦×•×¨×™× */
  .prisoner-card {
    background: var(--navy-light);
    border-right: 4px solid var(--gray);
    border-radius: 12px;
    padding: 14px;
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    animation: slideUp 0.3s ease;
  }
  .prisoner-card.atzur { border-color: var(--red); }
  .prisoner-card.meukav { border-color: var(--gold); }
  
  /* ×›×¨×˜×™×¡ ×›×•×— ××“× */
  .manpower-card {
    background: var(--navy-light);
    border-right: 4px solid var(--cyan);
    border-radius: 12px;
    padding: 14px;
    margin-bottom: 10px;
    animation: slideUp 0.3s ease;
  }
  .mp-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
  .mp-header h4 { font-size: 16px; font-weight: 700; color: #fff; }
  .mp-badge { background: rgba(6,182,212,0.15); color: #22d3ee; font-size: 13px; padding: 4px 8px; border-radius: 6px; font-weight: 600; }
  .mp-officers { font-size: 14px; color: var(--gray); line-height: 1.5; }
  
  .p-info h4 { font-size: 16px; font-weight: 700; color: #fff; }
  .p-info span { font-size: 13px; color: var(--gray); }
  .btn-delete { background: none; border: none; color: var(--gray-dark); font-size: 20px; cursor: pointer; padding: 5px; }
</style>
</head>
<body>

<div id="stationSelect" class="screen active">
  <div class="station-select">
    <div class="logo-area">
      <div class="shield-icon">ğŸ›¡ï¸</div>
      <h1>×ª×¤××´×§</h1>
      <p>××¢×¨×›×ª × ×™×”×•×œ ××©×™××•×ª - ××©×˜×¨×ª ×™×©×¨××œ</p>
    </div>
    <div class="station-buttons">
      <div class="station-btn" onclick="selectStation('ashkelon')"><div class="icon">ğŸ¢</div><div class="info"><h3>×ª×—× ×ª ××©×§×œ×•×Ÿ</h3><p>××¨×—×‘ ×œ×›×™×©</p></div><span class="arrow">&larr;</span></div>
      <div class="station-btn" onclick="selectStation('beersheva')"><div class="icon">ğŸ¢</div><div class="info"><h3>×ª×—× ×ª ×‘××¨ ×©×‘×¢</h3><p>××¨×—×‘ ×”× ×’×‘</p></div><span class="arrow">&larr;</span></div>
    </div>
  </div>
</div>

<div id="mainMenu" class="screen">
  <div class="header"><button class="back-btn" onclick="goBack('stationSelect')">&rarr;</button><span class="header-title" id="menuStationName"></span><button class="admin-gear" onclick="showAdminModal()">&#9881;</button></div>
  <div class="menu-content">
    <div class="welcome-card"><h2>×©×œ×•×, ×§×¦×™×Ÿ ×ª×•×¨×Ÿ</h2><p id="currentDate"></p></div>
    <div class="menu-grid">
      <div class="menu-card" onclick="showScreen('dutyTasks')"><div class="card-icon gold">ğŸ“‹</div><div class="card-info"><h3>××©×™××•×ª ×§×¦×™×Ÿ ×ª×•×¨×Ÿ</h3><p>×¦×³×§×œ×™×¡×˜ ×œ×¤× ×™ ×•×ª×•×š ×›×“×™ ××©××¨×ª</p></div></div>
      
      <div class="menu-card" onclick="showScreen('manpower')"><div class="card-icon" style="background: linear-gradient(135deg, #06b6d4, #0891b2); color: white;">ğŸ‘¥</div><div class="card-info"><h3>× ×™×”×•×œ ×›×•×— ××“×</h3><p>×©×™×‘×•×¥ ××©×™××•×ª ×•×§×•×“×™ ×§×¨×™××”</p></div></div>
      
      <div class="menu-card" onclick="showScreen('atzurim')"><div class="card-icon" style="background: linear-gradient(135deg, #f43f5e, #be123c); color: white;">â›“ï¸</div><div class="card-info"><h3>× ×™×”×•×œ ×¢×¦×•×¨×™×</h3><p>× ×•×¡×— ××–×”×¨×”, ×¨×™×©×•× ×•××¢×§×‘</p></div></div>
      <div class="menu-card" onclick="showScreen('eventTypes')"><div class="card-icon green">ğŸš¨</div><div class="card-info"><h3>×¢×™×§×¨×•×Ÿ ×˜×™×¤×•×œ ×‘××™×¨×•×¢</h3><p>×¡×“×´×¤ ×œ×¤×™ ×¡×•×’ ××™×¨×•×¢</p></div></div>
      <div class="menu-card" onclick="showScreen('profile')"><div class="card-icon blue">ğŸ›ï¸</div><div class="card-info"><h3>×¤×¨×•×¤×™×œ ×ª×—× ×”</h3><p>×¤×¨×˜×™ ×§×©×¨, ×’×‘×•×œ×•×ª ×’×–×¨×” ×•××™×“×¢</p></div></div>
    </div>
  </div>
</div>

<div id="dutyTasks" class="screen">
  <div class="header"><button class="back-btn" onclick="goBack('mainMenu')">&rarr;</button><span class="header-title">××©×™××•×ª ×§×¦×™×Ÿ ×ª×•×¨×Ÿ</span><span class="header-badge" id="taskCount">0/0</span></div>
  <div class="checklist-content">
    <div class="progress-bar-container"><div class="progress-header"><span>×”×ª×§×“××•×ª</span><strong id="progressPercent">0%</strong></div><div class="progress-track"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div></div>
    <div id="checklistContainer"></div>
    <button class="reset-btn" onclick="resetChecklist()">××¤×¡ ××ª ×›×œ ×”××©×™××•×ª</button>
  </div>
</div>

<div id="manpower" class="screen">
  <div class="header"><button class="back-btn" onclick="goBack('mainMenu')">&rarr;</button><span class="header-title">× ×™×”×•×œ ×›×•×— ××“× ×•×©×™×‘×•×¥</span></div>
  <div class="checklist-content">
    
    <div class="info-block" style="background: var(--navy-mid); border: 1px solid var(--cyan);">
       <h4 style="margin-bottom:12px; color: #fff;">×”×•×¡×¤×ª ××©×™××” / ×›×•×—</h4>
       <input type="text" id="mpMission" class="form-input" placeholder="×©× ×”××©×™××” (×œ×“×•×’': ××—×¡×•× ×¦×¤×•× ×™)">
       <div style="display:flex; gap:10px;">
         <input type="text" id="mpCallSign" class="form-input" placeholder="×§×•×“ ×§×¨×™××” / ×’×œ" style="width: 140px;" inputmode="numeric">
       </div>
       <textarea id="mpOfficers" class="form-input" placeholder="×©××•×ª ×©×•×˜×¨×™× (×œ×“×•×’': ××©×” ×›×”×Ÿ, ×“× ×™ ×œ×•×™)" style="height: 80px; resize: none;"></textarea>
       <button class="btn-confirm" style="width:100%; margin-top:5px; background: #0891b2;" onclick="addManpowerItem()">+ ×©×™×™×š ×›×•×—</button>
    </div>

    <div class="checklist-section">
      <div class="section-title">×¤×¨×™×¡×ª ×›×•×—×•×ª ×¤×¢×™×œ×”</div>
      <div id="manpowerListContainer">
        <p style="text-align:center; color:var(--gray); margin-top:20px;">××™×Ÿ ×›×•×—×•×ª ××©×•×‘×¦×™×</p>
      </div>
    </div>
  </div>
</div>

<div id="atzurim" class="screen">
  <div class="header">
    <button class="back-btn" onclick="goBack('mainMenu')">&rarr;</button>
    <span class="header-title">×™×•××Ÿ ×¢×¦×•×¨×™× ×•××¢×•×›×‘×™×</span>
  </div>
  <div class="checklist-content">
    
    <div class="info-block" style="border-right: 4px solid var(--red);">
      <h4>ğŸ“¢ × ×•×¡×— ××–×”×¨×” ×œ×¢×¦×•×¨ (×—×•×‘×”)</h4>
      <p style="font-size:16px; line-height:1.6; font-weight:600;">
        "×”× ×š ×—×©×•×“ ×‘[×¡×•×’ ×”×¢×‘×™×¨×”].<br>
        ××™×Ÿ ×—×•×‘×ª×š ×œ×•××¨ ×“×‘×¨, ××š ×›×œ ××” ×©×ª×××¨ ×¢×©×•×™ ×œ×©××© ×¨××™×” × ×’×“×š.<br>
        ×”×™×× ×¢×•×ª ××œ×”×©×™×‘ ×œ×©××œ×•×ª ×¢×©×•×™×” ×œ×—×–×§ ××ª ×”×¨××™×•×ª × ×’×“×š.<br>
        ×–×›×•×ª×• ×œ×”×™×•×•×¢×¥ ×‘×¢×•×¨×š ×“×™×Ÿ."
      </p>
    </div>

    <div class="info-block" style="background: var(--navy-mid); border: 1px solid var(--blue-light);">
       <h4 style="margin-bottom:12px; color: #fff;">×”×•×¡×¤×ª ×¨×™×©×•× ×—×“×©</h4>
       <input type="text" id="pName" class="form-input" placeholder="×©× ××œ×">
       <div style="display:flex; gap:10px; margin-bottom:10px;">
         <select id="pGender" class="form-select" style="width: 90px;">
           <option value="×–×›×¨">×–×›×¨</option>
           <option value="× ×§×‘×”">× ×§×‘×”</option>
         </select>
         <input type="number" id="pAge" class="form-input" placeholder="×’×™×œ" style="width: 80px;">
       </div>
       <input type="text" id="pOffense" class="form-input" placeholder="×¡×•×’ ×¢×‘×™×¨×” (×œ×“×•×’××”: ×ª×§×™×¤×”)">
       <div style="display:flex; gap:10px;">
         <select id="pType" class="form-select">
           <option value="atzur">×¢×¦×•×¨ ğŸ›‘</option>
           <option value="meukav">××¢×•×›×‘ âœ‹</option>
         </select>
         <input type="time" id="pTime" class="form-input" style="width: 120px;">
       </div>
       <button class="btn-confirm" style="width:100%; margin-top:5px;" onclick="addPrisoner()">+ ×”×•×¡×£ ×œ×¨×©×™××”</button>
    </div>

    <div class="checklist-section">
      <div class="section-title">×¨×©×™××ª ××¢×§×‘ ×¤×¢×™×œ×”</div>
      <div id="prisonersListContainer">
        <p style="text-align:center; color:var(--gray); margin-top:20px;">××™×Ÿ ×¢×¦×•×¨×™× ×‘×¨×©×™××”</p>
      </div>
    </div>
  </div>
</div>

<div id="eventTypes" class="screen">
  <div class="header"><button class="back-btn" onclick="goBack('mainMenu')">&rarr;</button><span class="header-title">×¢×™×§×¨×•×Ÿ ×˜×™×¤×•×œ ×‘××™×¨×•×¢</span></div>
  <div class="checklist-content" id="eventTypesContainer"></div>
</div>

<div id="eventDetail" class="screen">
  <div class="header"><button class="back-btn" onclick="goBack('eventTypes')">&rarr;</button><span class="header-title" id="eventDetailTitle"></span></div>
  <div id="eventDetailContent"></div>
</div>

<div id="profile" class="screen">
  <div class="header"><button class="back-btn" onclick="goBack('mainMenu')">&rarr;</button><span class="header-title">×¤×¨×•×¤×™×œ ×ª×—× ×”</span></div>
  <div class="profile-content" id="profileContainer"></div>
</div>

<div id="adminModal" class="modal-overlay" onclick="if(event.target===this)closeAdminModal()">
  <div class="modal-box"><h3>××¦×‘ × ×™×”×•×œ</h3><p>×”×–×Ÿ ×§×•×“ ×× ×”×œ ×œ×¢×¨×™×›×ª ×ª×•×›×Ÿ</p><input type="password" class="pin-input" id="pinInput" maxlength="4" inputmode="numeric" placeholder="----"><div class="modal-btns"><button class="btn-cancel" onclick="closeAdminModal()">×‘×™×˜×•×œ</button><button class="btn-confirm" onclick="verifyPin()">××™×©×•×¨</button></div></div>
</div>
<div class="toast" id="toast"></div>

<script>
var ADMIN_PIN = '1234';
var stationsData = {ashkelon:{name:'×ª×—× ×ª ××©×§×œ×•×Ÿ',area:'××¨×—×‘ ×œ×›×™×©',profile:{address:'×¨×—×³ ×”× ×©×™× 1, ××©×§×œ×•×Ÿ',phone:'08-6612222',fax:'08-6612233',commander:'×¡× ×´×¦ ×™×©×¨××œ ×›×”×Ÿ',dutyOfficer:'08-6612200',moked:'100',borders:['×¦×¤×•×Ÿ: × ×—×œ ×œ×›×™×© ×¢×“ ×¦×•××ª ××©×“×•×“','×“×¨×•×: × ×—×œ ×©×§××” ×¢×“ ×’×‘×•×œ ×¢×–×”','××–×¨×—: ×›×‘×™×© 4 - ×¦×•××ª ××©×§×œ×•×Ÿ','××¢×¨×‘: ×§×• ×—×•×£ ×”×™× ×”×ª×™×›×•×Ÿ']}},beersheva:{name:'×ª×—× ×ª ×‘××¨ ×©×‘×¢',area:'××¨×—×‘ ×”× ×’×‘',profile:{address:'×©×“×³ ×˜×•×‘×™×”×• 1, ×‘××¨ ×©×‘×¢',phone:'08-6468222',fax:'08-6468233',commander:'×¡× ×´×¦ ×“×•×“ ×œ×•×™',dutyOfficer:'08-6468200',moked:'100',borders:['×¦×¤×•×Ÿ: ×¦×•××ª ×©×•×§×ª ×¢×“ ×¦×•××ª ×œ×”×‘×™×','×“×¨×•×: ×¦×•××ª ×¢×¨×“ ×¢×“ ×ª×œ ×¢×¨×“','××–×¨×—: ×›×‘×™×© 40 - ×¦×•××ª ×›×¡×™×¤×”','××¢×¨×‘: ×›×‘×™×© 25 - ×¦×•××ª ×‘×™×ª ×§××”']}}};

// ×›××Ÿ ×¢×•×“×›×Ÿ ×”×¦'×§ ×œ×™×¡×˜ ×¢× ×”×“×’×©×™× ××”×ª×‘×—×™×Ÿ (×‘××§×•× ×”××¡×š ×”× ×¤×¨×“)
var dutyTasks = {
  'â— ×“×’×©×™× ×§×¨×™×˜×™×™× ×œ××‘×—×Ÿ (×ª×‘×—×™×Ÿ)': [
    {id:'crit1', text:'* ×”×•×¤×¢×” ×•×™×™×¦×•×’×™×•×ª ××œ××”', desc:'××“×™× ××’×•×”×¦×™×, ×’×™×œ×•×—/×©×™×¢×¨, ×¦×—×¦×•×—, ×“×¨×’×•×ª, ×ª×’×™ ×©× ×•×ª×¢×•×“×ª ××™× ×•×™'},
    {id:'crit2', text:'* ×‘×“×™×§×ª ×¦×™×•×“ ××™×©×™ ×•× ×™×™×“×ª', desc:'×ª×§×™× ×•×ª ×§×©×¨, ×˜××‘×œ×˜, ×¤× ×¡, ××¤×•×“ ×–×•×”×¨ ×•×¦×™×•×“ ××™×©×™'},
    {id:'crit3', text:'* ×‘×§×™××•×ª ×‘×’×–×¨×” ×•×‘×ª×“×¨×™×š', desc:'×”×¤×’× ×ª ×©×œ×™×˜×” ×‘××™×¨×•×¢×™× ×’×–×¨×ª×™×™× ×•×§×‘×œ×ª ×“×’×©×™× ×‘×ª×“×¨×™×š'},
    {id:'crit4', text:'* ×”×’×¢×” ×œ×–×™×¨×”: ×“×™×•×•×— + ×ª××•× ×ª ××¦×‘', desc:'×“×™×•×•×— ×¨××©×•× ×™ ××”×™×¨ ×œ××©×œ"×˜ ×¢×œ ×”×’×¢×” ×•×ª××•× ×ª ××¦×‘ ×¨××©×•× ×™×ª'},
    {id:'crit5', text:'* ×¡×’×™×¨×ª ×–×™×¨×” ×”×¨××˜×™×ª', desc:'×©×™××•×© ×‘×¡×¨×˜×™ ×¡×™××•×Ÿ, ×”×¨×—×§×ª ×¡×§×¨× ×™× ×•×× ×™×¢×ª ×–×™×”×•× ×”×–×™×¨×”'},
    {id:'crit6', text:'* ×”×¤×¢×œ×ª ×›×•×— ×•×©×œ×™×˜×”', desc:'×—×œ×•×§×ª ×’×–×¨×•×ª ×•××©×™××•×ª ×‘×¨×•×¨×•×ª ×œ×©×•×˜×¨×™×/××ª× ×“×‘×™×'},
    {id:'crit7', text:'* ×”×¤×’× ×ª ×× ×”×™×’×•×ª ×•×§×•×¨ ×¨×•×—', desc:'×ª×¤×§×•×“ ×¨×’×•×¢ ×ª×—×ª ×œ×—×¥, ×§×‘×œ×ª ×”×—×œ×˜×•×ª ×¢× ×™×™× ×™×ª ×•××¡×¨×˜×™×‘×™×•×ª'},
    {id:'crit8', text:'* ×××™× ×•×ª ×•×“×™×•×•×—', desc:'×“×™×•×•×— ×××ª, ×××™× ×•×ª ××œ××” ×•×¨×™×©×•× ×“×•×—×•×ª ××¤×•×¨×˜'}
  ],
  '×œ×¤× ×™ ×”××©××¨×ª': [
    {id:'t1',text:'×”×ª×™×™×¦×‘×•×ª ××•×œ ××ª"×— / ×§.××’"×',desc:'×§×‘×œ×ª ×ª×“×¨×•×š ×•×ª×™×§ ×§.×ª×•×¨×Ÿ (××¢×•×“×›×Ÿ)'},
    {id:'t2',text:'× ×”×œ×™ ×ª×—× ×”, ××“×™× ×™×•×ª ××¤×§×“, × ×”×œ×™ ×“×™×•×•×—',desc:'×œ×™××•×“ ×•×”×›×¨×ª × ×”×œ×™× ×¢×“×›× ×™×™×'},
    {id:'t3',text:'×‘×“×™×§×” ×œ×’×‘×™ ××¦×‘ ×©×•×˜×£',desc:'×“.×—, ××¢×¦×¨×™×, ×–×™××•×Ÿ ×—×©×•×“×™×, ×™×“×™×¢×•×ª, ×××•×™××™×, ×¡×“"×›, ×™×¡"×, ×ª×’×‘×•×¨, × ×™×™×“×•×ª, ××ª×§× ×™×, ×’×‘×•×œ×•×ª ×’×–×¨×”, ×›×•×—×•×ª ×•××™×¨×•×¢×™× × ×•×¡×¤×™×'},
    {id:'t4',text:'×—×‘×™×¨×” ×œ×™×•×× ××™ ×•×‘×“×™×§×ª ×××¦×¢×™×',desc:'×™×•×× ×™×, × ×©×§×™×, ×§×©×¨×™×, ×¨×›×‘×™×, ×¦×™×•×“, ××¨×•×Ÿ ××•×¦×’×™×, ×¡×“"×› ×›×•×—×•×ª (×•××¡×¤×¨×™ ×¤×œ××¤×•×Ÿ)'},
    {id:'t5',text:'×“×¨×›×™ ×ª×§×©×•×¨×ª ×•×—×‘×™×¨×” ×œ×‘×¢×œ×™ ×ª×¤×§×™×“×™×',desc:'×§×¦×™×Ÿ ×—×§×™×¨×•×ª, ×§×¦×™×Ÿ ×‘×™×œ×•×©, ×§×¦×™×Ÿ ×¡×™×•×¨'},
    {id:'t6',text:'×—×¤×™×¤×”',desc:'××™×¨×•×¢×™× ××ª××©×›×™× / ×—×¨×™×’×™×, ×¢×¦×•×¨×™×, ×¡×˜×˜×•×¡ ×××•×™××™×'},
    {id:'t7',text:'×—×‘×™×¨×” ×œ×¨××© ××©××¨×ª',desc:'×•×™×“×•× ×¡×“"×›×™×, ×¤×¢×¨×™× ×•××©×™××•×ª ××ª×•×›× × ×•×ª'},
    {id:'t8',text:'×”×ª×™×™×¦×‘×•×ª ××•×œ ××©×œ"×˜',desc:'×“×™×•×•×— ××•×›× ×•×ª'}
  ],
  '×ª×•×š ×›×“×™ ××©××¨×ª': [
    {id:'t9',text:'×¢×¦×•×¨×™×',desc:'××—×™×¦×ª ××’×Ÿ, ××¡××›×™ ×¢×¦×•×¨×™×, ×§×™×•× ×ª× ××™× ×”×•×œ××™×, ×ª×™××•× ××¢×¦×¨ / × ×—×©×•×Ÿ'},
    {id:'t10',text:'× ×•×›×—×•×ª ×•×“×’×©×™× ×‘×ª×“×¨×™×š ×œ××©××¨×ª',desc:'×ª×“×¨×•×š ×›×•×—×•×ª × ×•×¡×¤×™× (××ª× ×“×‘×™× / ×¨×’×œ×™ / ×ª×’×‘×•×¨)'},
    {id:'t11',text:'×§×©×¨ ×¢× ×›×œ×œ ×’×•×¨××™ ×”×ª×—× ×”',desc:'× ×™×™×“×•×ª, ×‘×™×œ×•×©, ××©"×§×™×, ××ª× ×“×‘×™×, ×—×•×§×¨, ×ª×’×‘×•×¨, ×›×•×—×•×ª × ×•×¡×¤×™×'},
    {id:'t12',text:'×•×™×“×•× ×¦×™×•×•×ª×™× ××•×œ ××©×œ"×˜',desc:'×‘×“×™×§×ª ×©×™×‘×•×¦×™× ×•×ª×§×™× ×•×ª'},
    {id:'t13',text:'×‘×§×¨×” ×¢×œ ××¢×¨×š ××‘×˜×—×” ×•×–×§×™×¤×•×ª',desc:'×‘×™×§×•×¨×ª ×¤×™×–×™×ª ×‘× ×§×•×“×•×ª'},
    {id:'t14',text:'×‘×§×¨×” ×¢×œ ×‘×™×¦×•×¢ ××˜×œ×•×ª ××‘×¦×¢×™×•×ª',desc:'××¢×§×‘ ××—×¨ ×‘×™×¦×•×¢ ××©×™××•×ª'},
    {id:'t15',text:'×˜×™×¤×•×œ ×‘××–×¨×—×™×',desc:'×•×™×“×•× ××¢× ×” ×©×œ ×”×™×•××Ÿ / ××©"×œ / ×—×•×§×¨ ×ª×•×¨×Ÿ'},
    {id:'t16',text:'×§×™×•× ×ª×¨×’×™×œ',desc:'×œ× ×™×™×“×•×ª / ×™×•××Ÿ / ××©"×œ / ×—×•×§×¨ ×ª×•×¨×Ÿ'}
  ]
};

var eventTypes = [
{id:'almab',icon:'ğŸ ',color:'rgba(168,85,247,0.12)',title:'×¡×“"×¤ ×§×¦×™×Ÿ ×‘×˜×™×¤×•×œ ×‘××œ×"×‘',desc:'××œ×™××•×ª ×‘××©×¤×—×” - ×¡×“×¨ ×¤×¢×•×œ×•×ª',type:'steps',steps:[{title:'×”×¤×¨×“×•×ª',desc:'×™×© ×œ×•×•×“× ×”×¤×¨×“×” ×‘×™×Ÿ ×‘× ×™ ×”×–×•×’ ×•×œ×©××•×¢ ××ª ×’×¨×¡×ª× ×œ××™×¨×•×¢.'},{title:'× ×©×§',desc:'×œ×‘×“×•×§ ×× ×œ×—×©×•×“ × ×©×§ ×•×× ×›×Ÿ ×œ×“×¨×•×© ×ª×¤×™×¡×ª×• ×•×”×¢×‘×¨×ª×• ×œ×—×•×§×¨ ×ª×•×¨×Ÿ.'},{title:'×‘×—×™× ×ª ×”×–×™×¨×”',desc:'×‘××™×“×” ×•×™×© ×”×¨×¡ / ×¡×™×× ×™ ××œ×™××•×ª / ×¨××™×•×ª - ×™×© ×œ×¦×œ× ×•×œ×ª×¤×•×¡ ××ª ×”×¨××™×•×ª.'},{title:'××™×¨×•×¢×™× ×§×•×“××™×',desc:'×œ×‘×“×•×§ ×¢×‘×¨ ×¤×œ×™×œ×™ ×©×œ ×”××¢×•×¨×‘×™× ×‘×“×’×© ×¢×œ ×¨×¦×™×“×™×‘×™×–× ×‘××™×¨×•×¢×™× ×§×•×“××™×.'},{title:'×§×‘×œ×ª ×”×—×œ×˜×”',desc:'×”×× ×œ×¢×›×‘ / ×œ×¢×¦×•×¨ ××ª ××™ ××”××¢×•×¨×‘×™×. ×‘××™×“×” ×•××™×Ÿ ×¢×™×›×•×‘ - ×’×‘×™×™×ª ×¢×“×•×ª ×‘××™×“×ª ×”×¦×•×¨×š.'},{title:'×¨×•×•×—×”',desc:'×œ×¢×¨×‘ ×’×•×¨××™ ×¨×•×•×—×” ×‘××™×“×ª ×”×¦×•×¨×š.'},{title:'×”×¤× ×™×” ×œ××§×œ×˜ × ×©×™× ××•×›×•×ª',desc:'×‘××™×“×” ×•×”×™× ××¢×•× ×™×™× ×ª.'},{title:'×‘×“×™×§×” ×¢× ×”×—×•×§×¨ ×”××˜×¤×œ',desc:'×”×ª×¨×©××•×ª ×”×—×•×§×¨ ×”××˜×¤×œ.'},{title:'××™×œ×•×™ ×“×•×— ×”×¢×¨×›×ª ××¡×•×›× ×•×ª',desc:'×•×™×“×•× ×‘×™×¦×•×¢ ×©×œ ×”×—×•×§×¨.'},{title:'×‘×“×•×§ ×”×× ×”×—×©×•×“ ××—×–×™×§ ×‘× ×©×§',desc:'×ª×¤×•×¡ ×‘××™×“×ª ×”×¦×•×¨×š.'},{title:'×‘×“×•×§ ×“×•"×— ××¡×•×›× ×•×ª',desc:'×¡×§×™×¨×ª ×“×•×—×•×ª ×§×•×“××™×.'},{title:'×¢×¨×‘ ×’×•×¨××™ ×¨×•×•×—×”',desc:'×©×™×¨×•×ª×™ ×¨×•×•×—×”, ×§×‘"×¡.'},{title:'×‘×“×•×§ ×”×ª×¨×©××•×ª ×”×—×•×§×¨',desc:'××‘× ×™ ×”×–×•×’ ×•×”××™×¨×•×¢.'},{title:'×‘×“×•×§ ××™×¨×•×¢×™× ×§×•×“××™× ×•×¢×‘×¨ ×¤×œ×™×œ×™',desc:'×©×œ ×”××¢×•×¨×‘×™×.'},{title:'×‘××™×“×” ×•×”×•×—×œ×˜ ×œ×©×—×¨×¨',desc:'×‘×—×¨ ×—×œ×•×¤×ª ××¢×¦×¨ ××ª××™××”.'}]},
{id:'missing',icon:'ğŸ”',color:'rgba(59,130,246,0.12)',title:'×¡×“"×¤ ×§×¦×™×Ÿ ×‘×˜×™×¤×•×œ ×‘× ×¢×“×¨×™×',desc:'×˜×™×¤×•×œ ×‘××™×¨×•×¢ × ×¢×“×¨×™×',type:'steps',steps:[{title:'××™×“×¢',desc:'×§×‘×œ×ª ××™×¨×‘ ×”×¤×¨×˜×™× ××•×“×•×ª ×”× ×¢×“×¨ ××”×—×•×§×¨. ×‘××™×¨×•×¢ ×ª×’×•×‘×” ×”×¡×™×™×¨ ×™××¡×•×£ ××™×“×¢ ×¨××©×•× ×™ ××”××©×œ"×˜ ×•××”××•×“×™×¢.'},{title:'××•×“×™×¢',desc:'×—×‘×™×¨×” ×œ××•×“×™×¢, ×ª×—×§×•×¨ ×•×‘×™×¦×•×¢ ×”×¢×¨×›×ª ××¦×‘ ×¨××©×•× ×™×ª.'},{title:'×¢×“×•×™×•×ª',desc:'×’×‘×™×™×ª ×¢×“×•×ª ××¤×•×¨×˜×ª ××”××•×“×™×¢.'},{title:'× ×¢×“×¨ ×‘×¡×™×›×•×Ÿ',desc:'×‘×“×™×§×” ×¢× ×”××•×“×™×¢ ×”×× ×”× ×¢×“×¨ ×¡×•×‘×œ ×××—×œ×•×ª, ××¡×•×›×Ÿ ×œ×¢×¦××• ××• ×œ×¡×‘×™×‘×”.'},{title:'×ª××•× ×”',desc:'×œ×§×™×—×ª ×ª××•× ×•×ª ×¢×“×›× ×™×•×ª ×©×œ ×”× ×¢×“×¨ ×•×”×¤×¦×ª× ×‘×™×—×“ ×¢× ×ª×™××•×¨ ×”× ×¢×“×¨ ×œ×›×•×—×•×ª ×”×¨×œ×•×•× ×˜×™×™×.'},{title:'×¢×“×›×•×Ÿ ××¦×•×“×” ×‘××™×¨×•×¢',desc:'×œ×¢×œ×•×ª ××•×œ ××¦×•×“×” ×•×œ×¢×“×›×Ÿ ×‘××™×¨×•×¢ ×•×›×Ÿ ×œ×‘×“×•×§ ××™×¨×•×¢×™× ×§×•×“××™× ×•××•×“×™×¢×™× ×™×ª ×¢×œ ×”× ×¢×“×¨.'},{title:'×¡×¨×™×§×•×ª',desc:'×‘×™×¦×•×¢ ×¡×¨×™×§×•×ª ×¢×¤"×™ ××•×“×œ ×”××¢×’×œ×™×.'},{title:'×‘×ª×™ ×—×•×œ×™×',desc:'×‘×“×™×§×ª ×‘×ª×™ ×—×•×œ×™× ×‘×’×–×¨×” ×”×× ×”×’×™×¢ ××˜×•×¤×œ ×× ×•× ×™××™.'},{title:'××™×›×•×Ÿ',desc:'××™×›×•×Ÿ ×˜×œ×¤×•× ×™ ×‘××™×“×” ×•×™×© ×—×©×© ×œ×—×™×™ ×”× ×¢×“×¨. ××™×ª×•×¨, ×¤×œ×˜ ×©×™×—×•×ª, ××¢×§×‘ ××©×¨××™, ×¢×™×Ÿ ×”× ×¥, ×¨×‘ ×§×•.'},{title:'×—×‘×™×¨×” ×•×–×™×”×•×™',desc:'×‘×¨×’×¢ ×©×”× ×¢×“×¨ ××•×ª×¨ - ×—×‘×™×¨×” ×¤×™×–×™×ª, ×”×‘× ×ª ×¡×™×¤×•×¨ ×”××§×¨×”, ×–×™×”×•×™ ×¢×œ ×™×“×™ ×ª×¢×•×“×” ××–×”×”.'},{title:'×¤×ª×™×—×ª ×™×•××Ÿ ××‘×¦×¨',desc:'×‘××™×“×” ×•×”× ×¢×“×¨ ×œ× ××•×ª×¨ ×‘×–××Ÿ ×¡×‘×™×¨.'},{title:'×’×‘×™×™×ª ×¢×“×•×™×•×ª ××”××¢×’×œ ×”×§×¨×•×‘',desc:'×—×§×™×¨×ª ×§×¨×•×‘×™× ×•××›×¨×™×.'},{title:'×§×˜×™×Ÿ - ×¢×“×›×•×Ÿ ××—×œ×§ × ×•×¢×¨',desc:'×—×•×‘×” ×œ×¢×“×›×Ÿ.'},{title:'×”×¢×‘×¨×ª ×“×™×•×•×— ×œ×¡×™×•×¨',desc:'×‘×¦×™×¨×•×£ ×ª××•× ×” ×•×ª×™××•×¨ ×—×™×¦×•× ×™ ×•××§×•××•×ª ××¤×©×¨×™×™× ×œ××™×ª×•×¨.'},{title:'×“×™×•×•×— ×œ×—×•×œ×™×™×ª × ×¢×“×¨×™× ×•×œ××©×œ"×˜',desc:'××¨×—×‘×™ / ××—×•×–×™.'},{title:'×—×™×¤×•×© ×‘×××’×¨×™ ××™×“×¢',desc:'××™×›×•× ×™×, ××©×¨××™, ×—×©×‘×•× ×•×ª ×‘× ×§, ××¦×œ××•×ª ××‘×˜×—×”, ××™×ª×•×¨××Ÿ.'},{title:'×‘×“×™×§×” ×‘××•×¡×“×•×ª ×¨×¤×•××™×™×',desc:'×‘×ª×™ ×—×•×œ×™×, ××¨×¤××•×ª ×‘××–×•×¨.'},{title:'×”×–×¢×§×ª ×›×•×—×•×ª ×¡×™×•×¢',desc:'××¡×•×§×™×, ×¤×¨×©×™×.'},{title:'×”×¢×‘×¨×ª ×“×™×•×•×— ×œ×™×—×™×“×•×ª × ×•×¡×¤×•×ª',desc:'×‘×”×ª×× ×œ× ×¡×™×‘×•×ª.'},{title:'×¤×¨×¡×•××™×',desc:'×‘×××¦×¢×•×ª ×—×•×œ×™×™×ª × ×¢×“×¨×™×.'}]},
{id:'death',icon:'âš°ï¸',color:'rgba(107,114,128,0.15)',title:'×¡×“"×¤ ×§×¦×™×Ÿ ×‘×¢×‘×™×¨×ª ×"×',desc:'××§×¨×” ××•×•×ª - ×¡×“×¨ ×¤×¢×•×œ×•×ª',type:'steps',steps:[{title:'××¡××›×™ ×©×—×¨×•×¨ ×’×•×¤×”',desc:'×”×‘××ª 2 ××¡××›×™ ×©×—×¨×•×¨ ×’×•×¤×” ×•××–×›×¨×™× ×œ××™×¨×•×¢.'},{title:'×ª×¢×•×“×ª ×¤×˜×™×¨×”',desc:'×§×‘×œ×ª ×ª×¢×•×“×ª ×¤×˜×™×¨×” ×××“"×.'},{title:'×–×™×”×•×™ ×”× ×¤×˜×¨',desc:'×–×™×”×•×™ ×¢×œ ×™×“×™ ×ª.×–, ×“×¨×›×•×Ÿ, ×ª×¢×•×“×” ××–×”×” ××—×¨×ª ×¢× ×ª××•× ×”.'},{title:'×¢×“×•×™×•×ª',desc:'×’×‘×™×™×ª ×¢×“×•×™×•×ª ××× ×©×™× (×‘×“"×› ×§×¨×•×‘×™ ××©×¤×—×” ××“×¨×’×” ×¨××©×•× ×”) ×©×™×›×•×œ×™× ×œ×©×¤×•×š ××•×¨ ×¢×œ ×¡×™×‘×•×ª ×”××•×•×ª.'},{title:'×‘×“×™×§×” ×—×™×¦×•× ×™×ª ×©×œ ×”×’×•×¤×”',desc:'×‘×—×™× ×” ×—×™×¦×•× ×™×ª ×œ×©×œ×™×œ×ª ×¤×œ×™×œ×™.'},{title:'×¡×¨×™×§×ª ×–×™×¨×”',desc:'××™×ª×•×¨ ×—×¤×¦×™× ×©×™×›×•×œ×™× ×œ×©×¤×•×š ××•×¨ ×¢×œ × ×¡×™×‘×•×ª ×”××•×•×ª.'},{title:'×“×™×•×•×—',desc:'×“×™×•×•×— ×•×§×‘×œ×ª ××™×©×•×¨×™× ××”×¨×œ"×— ×”××¨×—×‘×™.'},{title:'× ×ª×™×—×”',desc:'×©××™×œ×ª ×”××©×¤×—×” ×‘× ×•×’×¢ ×œ× ×ª×™×—×”.'},{title:'×“×•×—×•×ª',desc:'×¨×™×©×•× ×“×•×—×•×ª ×•××™×œ×•×™ ×˜×¤×¡×™×.'},{title:'×©×™×¨×•×ª',desc:'×’×™×©×ª ×©×™×¨×•×ª×™×ª - ×”××©×¤×—×” ×‘××‘×œ, ×™×© ×œ×”×‘×™×Ÿ ×•×œ×”×›×™×œ.'},{title:'×‘×“×™×§×ª ×¡×™×× ×™ ×¤×¨×™×¦×” ×œ×“×™×¨×”',desc:'×‘×“×™×§×ª ×¡×™×× ×™× ×‘×–×™×¨×”.'},{title:'×¡×™×× ×™ ×¤×¦×™×¢×” ×¢×œ ×”×’×•×¤×”',desc:'×ª×™×¢×•×“ ×›×œ ×¡×™××Ÿ ×—×©×•×“.'},{title:'×¡×™×× ×™ ×©×§×™×¢×ª ×“× ×‘×’×•×¤×”',desc:'×‘×“×™×§×” ×•×”×ª×××” ×œ××™×§×•×.'},{title:'×¡×™×× ×™ ×××‘×§ ×‘×–×™×¨×” / ×’×•×¤×”',desc:'×‘×—×™× ×ª ×¡×™×× ×™× ×¤×™×–×™×™×.'},{title:'××¦×‘ ×¨×¤×•××™ ×©×œ ×”× ×¤×˜×¨ ×˜×¨× ××•×ª×•',desc:'×‘×™×¨×•×¨ ××¦×‘ ×‘×¨×™××•×ª×™ ×§×•×“×.'},{title:'×¢×“×•×™×•×ª ×¡×•×ª×¨×•×ª',desc:'×”×©×•×•××ª ×’×¨×¡××•×ª ×‘×™×Ÿ ×¢×“×™×.'},{title:'×××‘×§×™ ×™×¨×•×©×”',desc:'×‘×“×™×§×ª ×× ×™×¢×™× ×›×œ×›×œ×™×™×.'},{title:'×××™×¨×•×ª ××¢×•×¨×‘×™× ×©××¢×œ×•×ª ×—×©×“',desc:'×ª×™×¢×•×“ ×•×“×™×•×•×—.'}]},
{id:'arrest',icon:'âš–ï¸',color:'rgba(245,158,11,0.12)',title:'×—×•×‘×•×ª ×”×§×¦×™×Ÿ / ×¢×¦×•×¨ ×œ×œ× ×¦×•',desc:'×”×œ×™×š ××¢×¦×¨ ×•×–×›×•×™×•×ª ×¢×¦×•×¨',type:'arrest'},
{id:'bail',icon:'ğŸ“„',color:'rgba(16,185,129,0.12)',title:'×©×—×¨×•×¨ ×‘×¢×¨×•×‘×”',desc:'×ª× ××™ ×©×—×¨×•×¨ ×‘×¢×¨×•×‘×”',type:'bail'},
{id:'court',icon:'ğŸš”',color:'rgba(239,68,68,0.12)',title:'×”×‘××ª ×”×¢×¦×•×¨ ×‘×¤× ×™ ×©×•×¤×˜',desc:'××•×¢×“×™ ×”×‘××” ×œ×¤×™ ××¦×‘',type:'court'}
];

var currentStation = null;
var checkedTasks = {};

function showScreen(screenId) { 
  var screens = document.querySelectorAll('.screen'); 
  for (var i = 0; i < screens.length; i++) { screens[i].classList.remove('active'); } 
  document.getElementById(screenId).classList.add('active'); 
  window.scrollTo(0, 0); 
  if (screenId === 'mainMenu') { renderMainMenu(); } 
  if (screenId === 'dutyTasks') { renderChecklist(); } 
  if (screenId === 'eventTypes') { renderEventTypes(); } 
  if (screenId === 'profile') { renderProfile(); } 
  if (screenId === 'manpower') { renderManpowerList(); }
  if (screenId === 'atzurim') { 
    var now = new Date();
    var timeStr = ("0" + now.getHours()).slice(-2) + ":" + ("0" + now.getMinutes()).slice(-2);
    document.getElementById('pTime').value = timeStr;
  }
}

function goBack(t) { showScreen(t); }
function selectStation(id) { currentStation = id; saveState(); showScreen('mainMenu'); }

function renderMainMenu() { if (!currentStation) return; document.getElementById('menuStationName').textContent = stationsData[currentStation].name; var now = new Date(); var days = ['×¨××©×•×Ÿ','×©× ×™','×©×œ×™×©×™','×¨×‘×™×¢×™','×—××™×©×™','×©×™×©×™','×©×‘×ª']; var months = ['×™× ×•××¨','×¤×‘×¨×•××¨','××¨×¥','××¤×¨×™×œ','×××™','×™×•× ×™','×™×•×œ×™','××•×’×•×¡×˜','×¡×¤×˜××‘×¨','××•×§×˜×•×‘×¨','× ×•×‘××‘×¨','×“×¦××‘×¨']; document.getElementById('currentDate').textContent = '×™×•× ' + days[now.getDay()] + ', ' + now.getDate() + ' ' + months[now.getMonth()] + ' ' + now.getFullYear(); }

function renderChecklist() {
  var container = document.getElementById('checklistContainer'); container.innerHTML = ''; var total = 0; var checked = 0; var sections = Object.keys(dutyTasks);
  for (var s = 0; s < sections.length; s++) { var sectionName = sections[s]; var tasks = dutyTasks[sectionName]; var sectionEl = document.createElement('div'); sectionEl.className = 'checklist-section'; sectionEl.innerHTML = '<div class="section-title">' + sectionName + '</div>';
    for (var i = 0; i < tasks.length; i++) { var task = tasks[i]; total++; var isChecked = checkedTasks[task.id]; if (isChecked) checked++;
      var item = document.createElement('div'); item.className = 'checklist-item' + (isChecked ? ' checked' : ''); item.onclick = (function(taskId) { return function() { toggleTask(taskId); }; })(task.id);
      var html = '<div class="check-box">' + (isChecked ? '&#10003;' : '') + '</div><div class="check-text"><h4>' + task.text + '</h4><p>' + task.desc + '</p></div>'; if (isChecked) { html += '<span class="check-time">' + checkedTasks[task.id] + '</span>'; } item.innerHTML = html; sectionEl.appendChild(item); } container.appendChild(sectionEl); }
  var pct = total > 0 ? Math.round((checked / total) * 100) : 0; document.getElementById('taskCount').textContent = checked + '/' + total; document.getElementById('progressPercent').textContent = pct + '%'; document.getElementById('progressFill').style.width = pct + '%';
}

function toggleTask(taskId) { if (checkedTasks[taskId]) { delete checkedTasks[taskId]; } else { var now = new Date(); var h = now.getHours(); var m = now.getMinutes(); checkedTasks[taskId] = (h < 10 ? '0' : '') + h + ':' + (m < 10 ? '0' : '') + m; } saveState(); renderChecklist(); }
function resetChecklist() { if (confirm('×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××¤×¡ ××ª ×›×œ ×”××©×™××•×ª?')) { checkedTasks = {}; saveState(); renderChecklist(); showToast('×”××©×™××•×ª ××•×¤×¡×• ×‘×”×¦×œ×—×”'); } }

function renderEventTypes() { var container = document.getElementById('eventTypesContainer'); container.innerHTML = ''; for (var i = 0; i < eventTypes.length; i++) { var ev = eventTypes[i]; var card = document.createElement('div'); card.className = 'event-card'; card.onclick = (function(event) { return function() { showEventDetail(event); }; })(ev); card.innerHTML = '<div class="event-header"><div class="event-icon" style="background:' + ev.color + '">' + ev.icon + '</div><h3>' + ev.title + '</h3></div><p>' + ev.desc + '</p>'; container.appendChild(card); } }

function showEventDetail(event) {
  document.getElementById('eventDetailTitle').textContent = event.title; var content = document.getElementById('eventDetailContent'); content.innerHTML = '';
  if (event.type === 'steps') { var html = '<div class="event-steps-container">'; for (var i = 0; i < event.steps.length; i++) { var step = event.steps[i]; html += '<div class="step-item" style="animation: slideUp 0.4s ease ' + (i * 0.05) + 's both"><div class="step-number">' + (i + 1) + '</div><div class="step-content"><h4>' + step.title + '</h4><p>' + step.desc + '</p></div></div>'; } html += '</div>'; content.innerHTML = html; }
  else if (event.type === 'arrest') { content.innerHTML = getArrestHTML(); }
  else if (event.type === 'bail') { content.innerHTML = getBailHTML(); }
  else if (event.type === 'court') { content.innerHTML = getCourtHTML(); }
  showScreen('eventDetail');
}

function getArrestHTML() { return '<div class="info-container"><div class="flow-title">×¢×¦×•×¨ ×œ×œ× ×¦×• - ×ª×¨×©×™× ×–×¨×™××”</div><div class="flow-box blue-bg">××¢×•×›×‘</div><div class="flow-arrow">&#9660;</div><div class="flow-box">×‘×“×™×§×ª ×¡×¢×™×£ 23</div><div class="flow-list"><li>×¢×‘×¨ ×‘×¤× ×™×• / ×–×” ××§×¨×•×‘ ×¢×‘×™×¨×” ×‘×ª ××¢×¦×¨</li><li>×—×©×© ×©×œ× ×™×•×¤×™×¢ ×œ×”×œ×™×›×™ ×—×§×™×¨×”</li><li>×—×©×© ×©×™×©×‘×© ×”×œ×™×›×™ ××©×¤×˜</li><li>×—×©×© ×©×™×¡×›×Ÿ ××ª ×‘×˜×—×•× ×• ×©×œ ××“× / ×¦×™×‘×•×¨ / ××“×™× ×”</li><li>×¢×‘×™×¨×ª ××™×ª×” ××• ×××¡×¨ ×¢×•×œ× / ×¢×‘×™×¨×•×ª ×‘×™×˜×—×•×Ÿ / ×¡××™× (×œ××¢×˜ ×©×™××•×©)</li><li>×—×©×© ×©×™×¤×¨ ××ª ×ª× ××™ ×”×©×—×¨×•×¨</li><li>×¢×‘×™×¨×” ×‘×ª ××¢×¦×¨ (×¢×•×•×Ÿ / ×¤×©×¢)</li></div><div class="flow-split"><div class="flow-split-col"><div class="flow-label">×›×Ÿ</div><div class="flow-box green-bg">×›×œ×™××” / ×¢×¨×•×‘×”</div></div><div class="flow-split-col"><div class="flow-label">×œ×</div><div class="flow-box red-bg">×©×—×¨×•×¨ ×”×—×©×•×“</div></div></div><div class="flow-arrow" style="margin-top:14px">&#9660;</div><div class="flow-box">×‘×“×™×§×ª ×¡×¢×™×£ 13</div><div class="flow-list"><li>××¡×•×›× ×•×ª</li><li>×©×™×‘×•×© ×”×œ×™×›×™ ×—×§×™×¨×” ××• ××©×¤×˜</li><li>×”×œ×™×›×™ ×—×§×™×¨×” ××™×•×—×“×™×</li></div><div class="flow-split"><div class="flow-split-col"><div class="flow-label">×›×Ÿ</div><div class="flow-box green-bg">×›×œ×™××” / ×¢×¨×•×‘×”</div></div><div class="flow-split-col"><div class="flow-label">×œ×</div><div class="flow-box red-bg">×©×—×¨×•×¨ ×”×—×©×•×“</div></div></div><div class="flow-title" style="margin-top:28px">×—×•×‘×•×ª ×”×§×¦×™×Ÿ ×‘×¢×ª ××¢×¦×¨</div><div class="info-block"><h4>×”×™×” ×•×”×—×œ×™×˜ ×”×§×¦×™×Ÿ ×”×××•× ×” ×¢×œ ××¢×¦×¨×• ×©×œ ×”×—×©×•×“ ×¢×œ×™×• ×œ××œ× ××—×¨:</h4><ul><li>××–×”×¨×ª ×”×—×©×•×“ ×˜×¨× ×”×©××¢×ª ×“×‘×¨×™×•.</li><li>×”×§×¦×™×Ÿ ×™×•×“×™×¢ ×œ×¢×¦×•×¨ ×¢×œ ××¢×¦×¨×• ×•×™×¡×‘×™×¨ ×œ×• ××ª ×¡×™×‘×ª ×”××¢×¦×¨.</li><li>×”×§×¦×™×Ÿ ×™×¡×‘×™×¨ ×œ×¢×¦×•×¨ ×¢×œ ×–×›×•×ª×• ×›×™ ×ª×™××¡×¨ ×”×•×“×¢×” ×¢×œ ××¢×¦×¨×• ×œ××“× ×”×§×¨×•×‘ ×œ×• ×•/××• ×œ×¢×•"×“, ×•×›×Ÿ ×›×™ ×–×›×•×ª×• ×œ×”×™×¤×’×© ×¢× ×¢×•"×“.</li><li>×”×§×¦×™×Ÿ ×™×¡×‘×™×¨ ×œ×¢×¦×•×¨ ×¢×œ ×–×›×•×ª×• ×œ×”×™×•×ª ××™×•×¦×’ ×¢×œ ×™×“×™ ×”×¡× ×’×•×¨×™×” ×”×¦×™×‘×•×¨×™×ª.</li><li>×”×§×¦×™×Ÿ ×™×•×“×™×¢ ×œ×• ×¢×œ ××©×š ×”×–××Ÿ ×©× ×™×ª×Ÿ ×œ×”×—×–×™×§×• ×‘××¢×¦×¨ ×‘×˜×¨× ×™×©×•×—×¨×¨.</li><li>×‘××™×“×” ×•×”×—×œ×™×˜ ×œ×¢×¦×•×¨ - ×™×—×ª×™× ××ª ×”×¢×¦×•×¨ ×¢×œ "××¡××›×ª×" ×•×™×‘××• ×‘×¤× ×™ ×©×•×¤×˜ ×ª×•×š 24 ×©×¢×•×ª ××¨×’×¢ ×”××¢×¦×¨.</li></ul></div></div>'; }

function getBailHTML() { return '<div class="info-container"><div class="info-block"><h4>×”×§×¦×™×Ÿ ×”×××•× ×” ×¨×©××™ ×œ×”×ª× ×•×ª ×‘×”×¡×›××ª ×”×—×©×•×“ ××ª ×”×©×—×¨×•×¨ ×‘×¢×¨×•×‘×” ×‘×§×™×•× ××—×“ ××• ×™×•×ª×¨ ××”×ª× ××™× ×”×‘××™×:</h4><ul><li>××™×¡×•×¨ ×™×¦×™××” ××”××¨×¥ - ×¢×“ 3 ×—×•×“×©×™× ×›×•×œ×œ ×”×¤×§×“×ª ×“×¨×›×•×Ÿ (×‘×¨×™×©×•×).</li><li>×”×¨×—×§×” ×××–×•×¨ ××§×•× ××• ×™×™×©×•×‘ ×‘××¨×¥ - ×¢×“ 15 ×™×•×.</li><li>××™×¡×•×¨ ×§×©×¨ - ××™×¡×•×¨ ×œ×§×™×™× ××• ×œ×™×¦×•×¨ ×§×©×¨ ×¢× ××™ ×©×™×§×‘×¢ ×¢×“ 30 ×™××™×.</li><li>×—×•×‘×ª ××’×•×¨×™× ××• ×”×™××¦××•×ª ×‘××–×•×¨ ××• ×‘×™×™×©×•×‘ ×‘××¨×¥ - ×¢×“ 15 ×™×•×. ×—×•×‘×ª ×”×ª×™×™×¦×‘×•×ª ×‘×ª×—× ×ª ×”××©×˜×¨×” ×‘××•×¢×“×™× ×©×™×§×‘×¢×•.</li><li>××¢×¦×¨ ×‘×™×ª - ×¢×“ 5 ×™××™×. ××™×¡×•×¨ ×™×¦×™××” ×××§×•× ××’×•×¨×™× ×‘××©×š ×›×œ ×©×¢×•×ª ×”×™×× ×” ××• ×—×œ×§ ××× ×”.</li></ul></div></div>'; }

function getCourtHTML() { return '<div class="info-container"><div class="info-block"><h4>××•×¢×“ ×”×‘××ª ×”×¢×¦×•×¨ ×—×œ ×‘×™×•× ×¨×’×™×œ</h4><ul><li>×™×© ×œ×”×‘×™× ×œ×¤× ×™ ×›× ×™×¡×ª ×”×©×‘×ª / ×—×’.</li></ul></div><div class="info-block"><h4>×œ××—×¨ ×¦××ª ×”×©×‘×ª / ×—×’</h4><ul><li>×‘×•×¦×¢ ××¢×¦×¨ ×¤× ×•×ª ×”-4, ×•×¢×“ 24 ×©×¢×•×ª ××”××¢×¦×¨, ×œ×¤×™ ×”×××•×—×¨.</li></ul></div><div class="info-block"><h4>×©×‘×ª + ×—×’ ××¢×œ 72 ×©×¢×•×ª</h4><ul><li>×™×© ×œ×”×‘×™× ×ª×•×š 32 ×©×¢×•×ª ××”××¢×¦×¨.</li></ul></div><div class="info-block"><h4>×©×‘×ª / ×—×’ ××¢×œ 48 ×©×¢×•×ª</h4><ul><li>×™×© ×œ×”×‘×™× ×‘×”×§×“× ×œ××—×¨ ×¦××ª ×”×©×‘×ª / ×—×’ ×•×¢×“ 24 ×©×¢×•×ª ××”××¢×¦×¨ ×œ×¤×™ ×”×××•×—×¨.</li></ul></div><div class="info-block"><h4>×‘×™×§×© ×”×¢×¦×•×¨ ×©×œ× ×œ×”×‘×™××• ×œ×¤× ×™ ×©×•×¤×˜ ×œ×¤× ×™ ×¦××ª ×©×‘×ª / ×—×’</h4><ul><li>×™×© ×œ×”×‘×™× ×¢×“ 4 ×©×¢×•×ª ××¦××ª ×”×©×‘×ª / ×—×’.</li></ul></div><div class="info-block"><h4>××•×¢×“ ×”×‘××” ×—×œ ×‘×©×‘×ª / ×—×’ ×•×§×™×™××•×ª × ×¡×™×‘×•×ª ×“×—×•×¤×•×ª</h4><ul><li>×™×© ×œ×”×‘×™× ×¢×“ 4 ×©×¢×•×ª ××¦××ª ×”×©×‘×ª / ×—×’.</li></ul></div></div>'; }

function renderProfile() { if (!currentStation) return; var station = stationsData[currentStation]; var p = station.profile; var html = '<div class="profile-card"><h3>×¤×¨×˜×™× ×›×œ×œ×™×™×</h3><div class="profile-row"><span class="label">×©× ×ª×—× ×”</span><span class="value">' + station.name + '</span></div><div class="profile-row"><span class="label">××¨×—×‘</span><span class="value">' + station.area + '</span></div><div class="profile-row"><span class="label">×›×ª×•×‘×ª</span><span class="value">' + p.address + '</span></div><div class="profile-row"><span class="label">××¤×§×“ ×ª×—× ×”</span><span class="value">' + p.commander + '</span></div></div><div class="profile-card"><h3>×˜×œ×¤×•× ×™×</h3><div class="profile-row"><span class="label">×˜×œ×¤×•×Ÿ ×ª×—× ×”</span><span class="value phone">' + p.phone + '</span></div><div class="profile-row"><span class="label">×¤×§×¡</span><span class="value phone">' + p.fax + '</span></div><div class="profile-row"><span class="label">×§×¦×™×Ÿ ×ª×•×¨×Ÿ</span><span class="value phone">' + p.dutyOfficer + '</span></div><div class="profile-row"><span class="label">××•×§×“ ××©×˜×¨×”</span><span class="value phone">' + p.moked + '</span></div></div><div class="profile-card"><h3>×’×‘×•×œ×•×ª ×’×–×¨×”</h3>'; for (var i = 0; i < p.borders.length; i++) { html += '<div class="border-tag">' + p.borders[i] + '</div>'; } html += '</div>'; document.getElementById('profileContainer').innerHTML = html; }

function showAdminModal() { document.getElementById('adminModal').classList.add('show'); document.getElementById('pinInput').value = ''; document.getElementById('pinInput').classList.remove('error'); setTimeout(function() { document.getElementById('pinInput').focus(); }, 300); }
function closeAdminModal() { document.getElementById('adminModal').classList.remove('show'); }
function verifyPin() { var pin = document.getElementById('pinInput').value; if (pin === ADMIN_PIN) { closeAdminModal(); showToast('××¦×‘ ×¢×¨×™×›×” ×¤×¢×™×œ'); } else { document.getElementById('pinInput').classList.add('error'); setTimeout(function() { document.getElementById('pinInput').classList.remove('error'); }, 500); } }
document.getElementById('pinInput').addEventListener('keyup', function(e) { if (e.key === 'Enter') { verifyPin(); } });
function showToast(msg) { var toast = document.getElementById('toast'); toast.textContent = msg; toast.classList.add('show'); setTimeout(function() { toast.classList.remove('show'); }, 2500); }

// --- × ×™×”×•×œ ×¢×¦×•×¨×™× ---
var prisoners = [];

function loadPrisoners() {
  try {
    var savedP = localStorage.getItem('tafmak_prisoners');
    if (savedP) {
      prisoners = JSON.parse(savedP);
      renderPrisonersList();
    }
  } catch(e) {}
}

function savePrisoners() {
  localStorage.setItem('tafmak_prisoners', JSON.stringify(prisoners));
}

function addPrisoner() {
  var name = document.getElementById('pName').value;
  var gender = document.getElementById('pGender').value;
  var age = document.getElementById('pAge').value;
  var offense = document.getElementById('pOffense').value;
  var type = document.getElementById('pType').value;
  var time = document.getElementById('pTime').value;

  if (!name || !time || !offense) {
    showToast('× × ×œ××œ× ×©×, ×¢×‘×™×¨×” ×•×©×¢×”');
    return;
  }

  var newP = {
    id: Date.now(),
    name: name,
    gender: gender,
    age: age,
    offense: offense,
    type: type,
    time: time,
    date: new Date().toLocaleDateString('he-IL')
  };

  prisoners.unshift(newP);
  savePrisoners();
  renderPrisonersList();
  
  // × ×™×§×•×™ ×”×©×“×•×ª
  document.getElementById('pName').value = '';
  document.getElementById('pAge').value = '';
  document.getElementById('pOffense').value = '';
  showToast('×”×¨×™×©×•× × ×•×¡×£ ×‘×”×¦×œ×—×”');
}

function deletePrisoner(id) {
  if (confirm('×œ××—×•×§ ××ª ×”×¨×™×©×•×?')) {
    prisoners = prisoners.filter(function(p) { return p.id !== id; });
    savePrisoners();
    renderPrisonersList();
  }
}

function renderPrisonersList() {
  var container = document.getElementById('prisonersListContainer');
  if (prisoners.length === 0) {
    container.innerHTML = '<p style="text-align:center; color:var(--gray); margin-top:20px;">××™×Ÿ ×¢×¦×•×¨×™× ×‘×¨×©×™××”</p>';
    return;
  }
  
  var html = '';
  for (var i = 0; i < prisoners.length; i++) {
    var p = prisoners[i];
    var typeText = p.type === 'atzur' ? '×¢×¦×•×¨' : '××¢×•×›×‘';
    var ageText = p.age ? ' (' + p.age + ')' : '';
    
    html += '<div class="prisoner-card ' + p.type + '">';
    html += '<div class="p-info" style="width:100%">';
    html += '<div style="display:flex; justify-content:space-between; align-items:center;">';
    html += '<h4>' + p.name + ageText + '</h4>';
    html += '<button class="btn-delete" onclick="deletePrisoner(' + p.id + ')">ğŸ—‘ï¸</button>';
    html += '</div>';
    html += '<div style="color:#fff; font-size:14px; margin:4px 0;">×¢×‘×™×¨×”: ' + p.offense + '</div>';
    html += '<span style="display:block; margin-top:4px;">' + typeText + ' â€¢ ' + p.gender + ' â€¢ ×”×•×›× ×¡ ×‘: <b style="color:#fff">' + p.time + '</b></span>';
    html += '</div></div>';
  }
  container.innerHTML = html;
}

// --- × ×™×”×•×œ ×›×•×— ××“× ---
var manpower = [];

function loadManpower() {
  try {
    var savedM = localStorage.getItem('tafmak_manpower');
    if (savedM) {
      manpower = JSON.parse(savedM);
      renderManpowerList();
    }
  } catch(e) {}
}

function saveManpower() {
  localStorage.setItem('tafmak_manpower', JSON.stringify(manpower));
}

function addManpowerItem() {
  var mission = document.getElementById('mpMission').value;
  var callSign = document.getElementById('mpCallSign').value;
  var officers = document.getElementById('mpOfficers').value;

  if (!mission) {
    showToast('× × ×œ××œ× ×©× ××©×™××”');
    return;
  }

  var newItem = {
    id: Date.now(),
    mission: mission,
    callSign: callSign || '-',
    officers: officers || '×œ×œ× ×¤×™×¨×•×˜'
  };

  manpower.unshift(newItem);
  saveManpower();
  renderManpowerList();
  
  // × ×™×§×•×™
  document.getElementById('mpMission').value = '';
  document.getElementById('mpCallSign').value = '';
  document.getElementById('mpOfficers').value = '';
  showToast('×”×›×•×— ×©×•×‘×¥ ×‘×”×¦×œ×—×”');
}

function deleteManpowerItem(id) {
  if (confirm('×œ××—×•×§ ××ª ×”××©×™××”?')) {
    manpower = manpower.filter(function(item) { return item.id !== id; });
    saveManpower();
    renderManpowerList();
  }
}

function renderManpowerList() {
  var container = document.getElementById('manpowerListContainer');
  if (manpower.length === 0) {
    container.innerHTML = '<p style="text-align:center; color:var(--gray); margin-top:20px;">××™×Ÿ ×›×•×—×•×ª ××©×•×‘×¦×™×</p>';
    return;
  }
  
  var html = '';
  for (var i = 0; i < manpower.length; i++) {
    var item = manpower[i];
    html += '<div class="manpower-card">';
    html += '<div class="mp-header">';
    html += '<h4>' + item.mission + '</h4>';
    html += '<div class="mp-badge">' + item.callSign + '</div>';
    html += '</div>';
    html += '<div style="display:flex; justify-content:space-between; align-items:start;">';
    html += '<div class="mp-officers">' + item.officers + '</div>';
    html += '<button class="btn-delete" onclick="deleteManpowerItem(' + item.id + ')">ğŸ—‘ï¸</button>';
    html += '</div></div>';
  }
  container.innerHTML = html;
}

function loadState() { 
  try { 
    var saved = localStorage.getItem('tafmak_checked'); 
    if (saved) { checkedTasks = JSON.parse(saved); } 
    localStorage.removeItem('tafmak_station'); 
    loadPrisoners(); 
    loadManpower();
  } catch(e) {} 
}

function saveState() { try { localStorage.setItem('tafmak_checked', JSON.stringify(checkedTasks)); } catch(e) {} }

loadState();
</script>
</body>
</html>
