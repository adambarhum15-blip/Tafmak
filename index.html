<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#0d0f12">
<title>×ª×¤××´×§ - ××¢×¨×›×ª × ×™×”×•×œ ××©×™××•×ª</title>
<link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
  :root {
    /* ×¦×‘×¢×™× ×§×¨×‘×™×™× ×˜×§×˜×™×™× */
    --navy: #0d0f12;          /* ×©×—×•×¨ ×¤×—× ×¢××•×§ */
    --navy-light: #161a20;    /* ××¤×•×¨ ×¤×œ×“×” ×›×”×” */
    --navy-mid: #1d222b;      /* ××¤×•×¨ ×˜×§×˜×™ */
    --blue: #1e3a8a;          /* ×›×—×•×œ ××©×˜×¨×” */
    --blue-light: #3b82f6;
    --blue-glow: rgba(59, 130, 246, 0.2);
    --gold: #d4af37;          /* ×–×”×‘ ×“×¨×’×•×ª */
    --green: #059669;
    --green-light: #10b981;
    --red: #dc2626;
    --siren-red: #ff002b;
    --siren-blue: #0044ff;
    --gray: #94a3b8;
    --gray-dark: #475569;
    --text: #f1f5f9;
    --radius: 6px;            /* ×¤×™× ×•×ª ×—×“×•×ª ×™×•×ª×¨ ×œ××¨××” ×¦×‘××™ */
    --shadow: 0 4px 15px rgba(0,0,0,0.5);
    --cyan: #06b6d4;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }
  
  /* ×¨×§×¢ ×§×¨×‘×™ ×¢× ×˜×§×¡×˜×•×¨×” */
  body { 
    font-family: 'Heebo', sans-serif; 
    background-color: var(--navy); 
    background-image: 
      radial-gradient(circle at 50% 0%, #171d26 0%, transparent 60%),
      repeating-linear-gradient(45deg, rgba(255,255,255,0.01) 0px, rgba(255,255,255,0.01) 2px, transparent 2px, transparent 6px);
    color: var(--text); 
    min-height: 100vh; 
    overflow-x: hidden; 
    -webkit-tap-highlight-color: transparent; 
  }
  
  .screen { display: none; min-height: 100vh; padding-bottom: 100px; animation: fadeIn 0.3s ease; }
  .screen.active { display: block; }
  
  @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes shake { 25% { transform: translateX(6px); } 50% { transform: translateX(-6px); } 75% { transform: translateX(4px); } }

  /* ××¤×§×˜ ×¡×™×¨× ×•×ª (×¦'×§×œ×§×”) ××”×‘×”×‘ ×œ××¢×œ×” */
  .siren-bar {
    position: fixed; top: 0; left: 0; width: 100%; height: 4px; z-index: 2000;
    animation: policeSiren 1s infinite alternate;
  }
  @keyframes policeSiren {
    0% { background: var(--siren-red); box-shadow: 0 0 15px var(--siren-red); }
    100% { background: var(--siren-blue); box-shadow: 0 0 15px var(--siren-blue); }
  }

  /* ××¡×š ×¤×ª×™×—×” */
  .station-select { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; padding: 30px; position: relative; overflow: hidden; }
  .logo-area { text-align: center; margin-bottom: 50px; animation: slideUp 0.6s ease; z-index: 10; }
  
  /* ×œ×•×’×• ××©×˜×¨×ª ×™×©×¨××œ ×”×××™×ª×™ */
  .police-logo {
    width: 130px; height: 130px; margin: 0 auto 20px; display: block;
    filter: drop-shadow(0 0 20px rgba(59, 130, 246, 0.4));
  }
  
  .logo-area h1 { font-size: 34px; font-weight: 900; color: #fff; letter-spacing: 1px; text-shadow: 0 2px 4px rgba(0,0,0,0.8); }
  .logo-area p { font-size: 15px; color: var(--gray); margin-top: 6px; font-weight: 500; text-transform: uppercase; letter-spacing: 2px; }
  
  .station-buttons { width: 100%; max-width: 360px; display: flex; flex-direction: column; gap: 16px; animation: slideUp 0.8s ease; z-index: 10; }
  .station-btn { background: var(--navy-light); border: 2px solid #2a3441; border-radius: var(--radius); padding: 22px 24px; display: flex; align-items: center; gap: 16px; cursor: pointer; transition: all 0.2s ease; text-align: right; box-shadow: var(--shadow); }
  .station-btn:active { background: var(--navy-mid); border-color: var(--blue-light); transform: scale(0.98); }
  .station-btn .icon { width: 48px; height: 48px; border-radius: 4px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; font-size: 20px; flex-shrink: 0; }
  .station-btn .info h3 { font-size: 18px; font-weight: 800; color: #fff; }
  .station-btn .info p { font-size: 13px; color: var(--gold); margin-top: 3px; font-weight: 600; }
  .station-btn .arrow { margin-right: auto; color: var(--gray-dark); font-size: 18px; }

  /* ×ª×¤×¨×™×˜ ×¢×œ×™×•×Ÿ - Header */
  .header { background: rgba(13, 15, 18, 0.95); padding: 20px 20px; display: flex; align-items: center; gap: 14px; position: sticky; top: 0; z-index: 100; border-bottom: 1px solid rgba(255,255,255,0.05); backdrop-filter: blur(10px); }
  .back-btn { background: #1f2532; border: 1px solid rgba(255,255,255,0.1); color: var(--text); width: 38px; height: 38px; border-radius: var(--radius); font-size: 18px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
  .header-title { font-size: 18px; font-weight: 800; color: #fff; flex: 1; letter-spacing: 0.5px; }
  .header-badge { background: var(--blue-light); color: #fff; font-size: 12px; font-weight: 700; padding: 4px 10px; border-radius: 4px; box-shadow: 0 0 10px rgba(59,130,246,0.5); }
  .admin-gear { background: none; border: none; color: var(--gray-dark); font-size: 22px; cursor: pointer; padding: 4px; transition: color 0.2s; }
  .admin-gear:active { color: #fff; }

  .menu-content { padding: 24px 20px; }
  .welcome-card { background: linear-gradient(135deg, #111827, #1e3a8a); border-left: 5px solid var(--blue-light); border-radius: var(--radius); padding: 24px; margin-bottom: 28px; box-shadow: var(--shadow); position: relative; overflow: hidden; }
  .welcome-card h2 { font-size: 22px; font-weight: 900; color: #fff; margin-bottom: 4px; }
  .welcome-card p { font-size: 14px; color: var(--gray); font-weight: 500; }
  
  .menu-grid { display: flex; flex-direction: column; gap: 12px; }
  .menu-card { background: var(--navy-light); border: 1px solid rgba(255,255,255,0.05); border-radius: var(--radius); padding: 20px; display: flex; align-items: center; gap: 18px; cursor: pointer; transition: all 0.2s ease; position: relative; overflow: hidden; }
  .menu-card::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 4px; background: transparent; transition: 0.2s; }
  .menu-card:active { transform: scale(0.98); background: var(--navy-mid); }
  
  /* ×¦×‘×¢×™ ×¦×“ ×§×¨×‘×™×™× ×œ×¤×™ ×§×˜×’×•×¨×™×” */
  .menu-card.c-gold::before { background: var(--gold); }
  .menu-card.c-cyan::before { background: var(--cyan); }
  .menu-card.c-red::before { background: var(--red); }
  .menu-card.c-green::before { background: var(--green); }
  .menu-card.c-blue::before { background: var(--blue-light); }

  .menu-card .card-icon { width: 50px; height: 50px; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 22px; flex-shrink: 0; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.05); }
  .menu-card .card-info h3 { font-size: 16px; font-weight: 800; color: #fff; margin-bottom: 4px; }
  .menu-card .card-info p { font-size: 13px; color: var(--gray); line-height: 1.4; }

  /* ×¦'×§ ×œ×™×¡×˜ */
  .checklist-content { padding: 20px; }
  .checklist-section { margin-bottom: 28px; }
  .section-title { font-size: 15px; font-weight: 800; color: var(--gold); letter-spacing: 1px; margin-bottom: 14px; padding-right: 4px; text-transform: uppercase; border-bottom: 1px solid rgba(212,175,55,0.2); padding-bottom: 6px; display: inline-block; }
  .checklist-item { background: var(--navy-light); border: 1px solid rgba(255,255,255,0.05); border-radius: var(--radius); padding: 16px; margin-bottom: 10px; display: flex; align-items: flex-start; gap: 14px; cursor: pointer; transition: all 0.2s ease; }
  .checklist-item:active { transform: scale(0.98); }
  .checklist-item.checked { background: rgba(16,185,129,0.05); border-color: rgba(16,185,129,0.3); opacity: 0.8; }
  .check-box { width: 24px; height: 24px; border-radius: 4px; border: 2px solid var(--gray-dark); display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px; transition: all 0.2s ease; font-size: 14px; color: transparent; background: #000; }
  .checklist-item.checked .check-box { background: var(--green); border-color: var(--green); color: #fff; }
  .check-text { flex: 1; }
  .check-text h4 { font-size: 15px; font-weight: 700; color: #fff; line-height: 1.5; }
  .checklist-item.checked .check-text h4 { color: var(--gray); text-decoration: line-through; }
  .check-text p { font-size: 13px; color: var(--gray); margin-top: 4px; line-height: 1.4; }
  .check-time { font-size: 12px; color: var(--green-light); font-weight: 700; white-space: nowrap; font-family: monospace; }

  .progress-bar-container { background: var(--navy-light); border-radius: var(--radius); padding: 18px; margin-bottom: 24px; border: 1px solid rgba(255,255,255,0.05); }
  .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
  .progress-header span { font-size: 13px; color: var(--gray); font-weight: 700; text-transform: uppercase; }
  .progress-header strong { font-size: 16px; color: var(--blue-light); font-weight: 800; }
  .progress-track { height: 6px; background: rgba(0,0,0,0.5); border-radius: 3px; overflow: hidden; }
  .progress-fill { height: 100%; background: var(--blue-light); box-shadow: 0 0 10px var(--blue-light); border-radius: 3px; transition: width 0.4s ease; }

  /* ×˜×¤×¡×™× ×¦×‘××™×™× */
  .form-input, .form-select { width: 100%; background: #080a0c; border: 1px solid #2a3441; color: #fff; padding: 14px; border-radius: 4px; font-family: 'Heebo', sans-serif; font-size: 15px; font-weight: 500; outline: none; margin-bottom: 10px; transition: 0.2s; }
  .form-input:focus, .form-select:focus { border-color: var(--blue-light); box-shadow: 0 0 8px rgba(59,130,246,0.3); }
  
  .info-block { background: var(--navy-light); border: 1px solid rgba(255,255,255,0.05); border-radius: var(--radius); padding: 18px; margin-bottom: 14px; }
  .info-block.add-form { border-top: 3px solid var(--gray-dark); }
  
  .btn-confirm { background: var(--blue); color: #fff; padding: 14px; border-radius: 4px; font-family: 'Heebo', sans-serif; font-size: 15px; font-weight: 800; cursor: pointer; border: none; text-transform: uppercase; letter-spacing: 1px; transition: 0.2s; }
  .btn-confirm:active { transform: scale(0.98); background: var(--blue-light); }
  .reset-btn { background: rgba(220,38,38,0.1); border: 1px solid rgba(220,38,38,0.3); color: var(--red); padding: 14px; border-radius: 4px; font-family: 'Heebo', sans-serif; font-size: 14px; font-weight: 800; cursor: pointer; width: 100%; margin-top: 10px; text-transform: uppercase; }

  /* ×›×¨×˜×™×¡×™ ×¢×¦×•×¨×™× ×•×›×•×— ××“× */
  .prisoner-card, .manpower-card { background: var(--navy-light); border: 1px solid rgba(255,255,255,0.05); border-radius: var(--radius); padding: 16px; margin-bottom: 12px; display: flex; justify-content: space-between; align-items: flex-start; animation: slideUp 0.3s ease; position: relative; overflow: hidden; }
  .prisoner-card::before, .manpower-card::before { content: ''; position: absolute; right: 0; top: 0; bottom: 0; width: 4px; }
  
  .prisoner-card.atzur::before { background: var(--red); box-shadow: 0 0 10px var(--red); }
  .prisoner-card.meukav::before { background: var(--gold); box-shadow: 0 0 10px var(--gold); }
  .manpower-card::before { background: var(--cyan); box-shadow: 0 0 10px var(--cyan); }
  
  .p-info { width: 100%; }
  .p-info h4 { font-size: 16px; font-weight: 800; color: #fff; margin-bottom: 4px; }
  .p-tech { font-size: 13px; color: var(--gray); font-family: monospace; background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 3px; border: 1px solid rgba(255,255,255,0.1); display: inline-block; margin-top: 6px; }
  .btn-delete { background: none; border: none; color: var(--gray-dark); font-size: 18px; cursor: pointer; padding: 5px; transition: 0.2s; }
  .btn-delete:active { color: var(--red); transform: scale(1.2); }

  /* ×¡×“"×¤ */
  .event-card { background: var(--navy-light); border: 1px solid rgba(255,255,255,0.05); border-left: 3px solid var(--green); border-radius: var(--radius); padding: 20px; margin-bottom: 14px; cursor: pointer; transition: all 0.2s ease; }
  .event-card:active { transform: scale(0.98); }
  .event-card .event-header { display: flex; align-items: center; gap: 14px; margin-bottom: 8px; }
  .event-card h3 { font-size: 16px; font-weight: 800; color: #fff; }
  .event-card > p { font-size: 13px; color: var(--gray); line-height: 1.5; margin-right: 0; }

  .step-item { display: flex; gap: 16px; margin-bottom: 24px; position: relative; }
  .step-number { width: 30px; height: 30px; border-radius: 4px; background: #080a0c; border: 1px solid var(--blue-light); color: var(--blue-light); display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 900; flex-shrink: 0; z-index: 2; box-shadow: 0 0 10px rgba(59,130,246,0.2); }
  .step-item:not(:last-child)::after { content: ''; position: absolute; right: 14px; top: 30px; bottom: -24px; width: 2px; background: rgba(59,130,246,0.2); z-index: 1; }
  .step-content h4 { font-size: 15px; font-weight: 800; color: #fff; margin-bottom: 4px; line-height: 30px; }
  .step-content p { font-size: 13px; color: var(--gray); line-height: 1.6; }

  /* ×¤×¨×•×¤×™×œ ×ª×—× ×” */
  .profile-card { background: var(--navy-light); border: 1px solid rgba(255,255,255,0.05); border-radius: var(--radius); padding: 20px; margin-bottom: 16px; }
  .profile-card h3 { font-size: 14px; font-weight: 800; color: var(--gold); margin-bottom: 14px; text-transform: uppercase; border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 8px; }
  .profile-row { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px dashed rgba(255,255,255,0.05); }
  .profile-row:last-child { border: none; }
  .profile-row .label { font-size: 13px; color: var(--gray); font-weight: 600; }
  .profile-row .value { font-size: 14px; font-weight: 800; color: #fff; }
  .profile-row .value.phone { color: var(--blue-light); direction: ltr; font-family: monospace; font-size: 15px; }

  /* ××•×“×œ×™× ×•×”×ª×¨××•×ª */
  .modal-overlay { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.85); z-index: 1000; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(5px); }
  .modal-overlay.show { display: flex; }
  .modal-box { background: var(--navy-light); border: 1px solid var(--blue-light); border-radius: var(--radius); padding: 30px; width: 100%; max-width: 320px; text-align: center; animation: slideUp 0.3s ease; box-shadow: 0 0 30px rgba(59,130,246,0.2); }
  .pin-input { width: 100%; background: #000; border: 2px solid #333; color: var(--blue-light); font-family: monospace; font-size: 32px; font-weight: 900; text-align: center; letter-spacing: 15px; padding: 14px; border-radius: 4px; outline: none; margin: 20px 0; }
  .pin-input:focus { border-color: var(--blue-light); box-shadow: 0 0 15px rgba(59,130,246,0.3); }
  .modal-btns { display: flex; gap: 10px; }
  
  .toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px); background: rgba(16,185,129,0.9); border: 1px solid #10b981; color: #fff; padding: 12px 24px; border-radius: 4px; font-size: 14px; font-weight: 800; z-index: 2000; transition: transform 0.3s ease; white-space: nowrap; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
  .toast.show { transform: translateX(-50%) translateY(0); }
</style>
</head>
<body>

<div class="siren-bar"></div>

<div id="stationSelect" class="screen active">
  <div class="station-select">
    <div class="logo-area">
      <img src="https://upload.wikimedia.org/wikipedia/commons/f/f6/Israel_police_logo.svg" alt="××©×˜×¨×ª ×™×©×¨××œ" class="police-logo">
      <h1>×ª×¤××´×§</h1>
      <p>××¢×¨×›×ª × ×™×”×•×œ ××©×™××•×ª ××•×¤×¨×˜×™×‘×™×ª</p>
    </div>
    <div class="station-buttons">
      <div class="station-btn" onclick="selectStation('ashkelon')"><div class="icon">ğŸ¢</div><div class="info"><h3>×ª×—× ×ª ××©×§×œ×•×Ÿ</h3><p>××¨×—×‘ ×œ×›×™×©</p></div><span class="arrow">&larr;</span></div>
      <div class="station-btn" onclick="selectStation('beersheva')"><div class="icon">ğŸ¢</div><div class="info"><h3>×ª×—× ×ª ×‘××¨ ×©×‘×¢</h3><p>××¨×—×‘ ×”× ×’×‘</p></div><span class="arrow">&larr;</span></div>
    </div>
  </div>
</div>

<div id="mainMenu" class="screen">
  <div class="header"><button class="back-btn" onclick="goBack('stationSelect')">&rarr;</button><span class="header-title" id="menuStationName"></span><button class="admin-gear" onclick="showAdminModal()">&#9881;</button></div>
  <div class="menu-content">
    <div class="welcome-card"><h2>×©×œ×•×, ×§×¦×™×Ÿ ×ª×•×¨×Ÿ</h2><p id="currentDate"></p></div>
    <div class="menu-grid">
      <div class="menu-card c-gold" onclick="showScreen('dutyTasks')"><div class="card-icon">ğŸ“‹</div><div class="card-info"><h3>××©×™××•×ª ×§×¦×™×Ÿ ×ª×•×¨×Ÿ</h3><p>×¦×³×§×œ×™×¡×˜ ×œ×¤× ×™ ×•×ª×•×š ×›×“×™ ××©××¨×ª</p></div></div>
      <div class="menu-card c-cyan" onclick="showScreen('manpower')"><div class="card-icon">ğŸ‘¥</div><div class="card-info"><h3>× ×™×”×•×œ ×›×•×— ××“×</h3><p>×©×™×‘×•×¥ ××©×™××•×ª ×•×§×•×“×™ ×§×¨×™××”</p></div></div>
      <div class="menu-card c-red" onclick="showScreen('atzurim')"><div class="card-icon">â›“ï¸</div><div class="card-info"><h3>× ×™×”×•×œ ×¢×¦×•×¨×™×</h3><p>× ×•×¡×— ××–×”×¨×”, ×¨×™×©×•× ×•××¢×§×‘</p></div></div>
      <div class="menu-card c-green" onclick="showScreen('eventTypes')"><div class="card-icon">ğŸš¨</div><div class="card-info"><h3>×¢×™×§×¨×•×Ÿ ×˜×™×¤×•×œ ×‘××™×¨×•×¢</h3><p>×¡×“×´×¤ ×œ×¤×™ ×¡×•×’ ××™×¨×•×¢</p></div></div>
      <div class="menu-card c-blue" onclick="showScreen('profile')"><div class="card-icon">ğŸ›ï¸</div><div class="card-info"><h3>×¤×¨×•×¤×™×œ ×ª×—× ×”</h3><p>×¤×¨×˜×™ ×§×©×¨, ×’×‘×•×œ×•×ª ×’×–×¨×” ×•××™×“×¢</p></div></div>
    </div>
  </div>
</div>

<div id="dutyTasks" class="screen">
  <div class="header"><button class="back-btn" onclick="goBack('mainMenu')">&rarr;</button><span class="header-title">××©×™××•×ª ×§×¦×™×Ÿ ×ª×•×¨×Ÿ</span><span class="header-badge" id="taskCount">0/0</span></div>
  <div class="checklist-content">
    <div class="progress-bar-container"><div class="progress-header"><span>×”×ª×§×“××•×ª ××‘×¦×¢×™×ª</span><strong id="progressPercent">0%</strong></div><div class="progress-track"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div></div>
    <div id="checklistContainer"></div>
    <button class="reset-btn" onclick="resetChecklist()">××¤×¡ ××©×™××•×ª ×œ××©××¨×ª ×—×“×©×”</button>
  </div>
</div>

<div id="manpower" class="screen">
  <div class="header"><button class="back-btn" onclick="goBack('mainMenu')">&rarr;</button><span class="header-title">× ×™×”×•×œ ×¡×“"×› ×•×©×™×‘×•×¥</span></div>
  <div class="checklist-content">
    <div class="info-block add-form" style="border-top-color: var(--cyan);">
       <h4 style="margin-bottom:12px; color: var(--cyan);">×©×™×‘×•×¥ ××©×™××” / ×›×•×— ×—×“×©</h4>
       <input type="text" id="mpMission" class="form-input" placeholder="×©× ×”××©×™××” (×œ×“×•×’': ××—×¡×•× ×¦×¤×•× ×™)">
       <input type="text" id="mpCallSign" class="form-input" placeholder="×§×•×“ ×§×¨×™××” ×‘×§×©×¨ / ×’×œ (×œ×“×•×’': 212)" inputmode="numeric">
       <textarea id="mpOfficers" class="form-input" placeholder="×©××•×ª ×©×•×˜×¨×™× ×”××©×•×‘×¦×™× ×œ×›×•×—" style="height: 80px; resize: none;"></textarea>
       <button class="btn-confirm" style="width:100%; background: var(--cyan);" onclick="addManpowerItem()">×©×’×¨ ×›×•×— ×œ××©×™××”</button>
    </div>
    <div class="checklist-section">
      <div class="section-title" style="color: var(--cyan); border-bottom-color: rgba(6,182,212,0.3);">×¤×¨×™×¡×ª ×›×•×—×•×ª ×¤×¢×™×œ×”</div>
      <div id="manpowerListContainer"><p style="text-align:center; color:var(--gray); margin-top:20px;">××™×Ÿ ×›×•×—×•×ª ××©×•×‘×¦×™×</p></div>
    </div>
  </div>
</div>

<div id="atzurim" class="screen">
  <div class="header"><button class="back-btn" onclick="goBack('mainMenu')">&rarr;</button><span class="header-title">×™×•××Ÿ ×¢×¦×•×¨×™× ×•××¢×•×›×‘×™×</span></div>
  <div class="checklist-content">
    <div class="info-block" style="border-right: 4px solid var(--red); background: rgba(220,38,38,0.05);">
      <h4 style="color:var(--red);">ğŸ“¢ × ×•×¡×— ××–×”×¨×” ×œ×¢×¦×•×¨ (×—×•×‘×”)</h4>
      <p style="font-size:16px; line-height:1.6; font-weight:700;">"×”× ×š ×—×©×•×“ ×‘[×¡×•×’ ×”×¢×‘×™×¨×”]. ××™×Ÿ ×—×•×‘×ª×š ×œ×•××¨ ×“×‘×¨, ××š ×›×œ ××” ×©×ª×××¨ ×¢×©×•×™ ×œ×©××© ×¨××™×” × ×’×“×š. ×”×™×× ×¢×•×ª ××œ×”×©×™×‘ ×œ×©××œ×•×ª ×¢×©×•×™×” ×œ×—×–×§ ××ª ×”×¨××™×•×ª × ×’×“×š. ×–×›×•×ª×š ×œ×”×™×•×•×¢×¥ ×‘×¢×•×¨×š ×“×™×Ÿ."</p>
    </div>
    <div class="info-block add-form" style="border-top-color: var(--red);">
       <h4 style="margin-bottom:12px; color: #fff;">×¨×™×©×•× ×§×œ×™×˜×” ×—×“×©</h4>
       <input type="text" id="pName" class="form-input" placeholder="×©× ×”×—×©×•×“ ×”××œ×">
       <div style="display:flex; gap:10px; margin-bottom:10px;">
         <select id="pGender" class="form-select" style="width: 100px;"><option value="×–×›×¨">×–×›×¨</option><option value="× ×§×‘×”">× ×§×‘×”</option></select>
         <input type="number" id="pAge" class="form-input" placeholder="×’×™×œ" style="width: 80px;">
       </div>
       <input type="text" id="pOffense" class="form-input" placeholder="×¡×¢×™×£ ×¢×‘×™×¨×” (×œ×“×•×’××”: ×ª×§×™×¤×”)">
       <div style="display:flex; gap:10px;">
         <select id="pType" class="form-select"><option value="atzur">×¢×¦×•×¨ ğŸ›‘</option><option value="meukav">××¢×•×›×‘ âœ‹</option></select>
         <input type="time" id="pTime" class="form-input" style="width: 120px; font-family:monospace; font-size:16px;">
       </div>
       <button class="btn-confirm" style="width:100%; background: var(--red);" onclick="addPrisoner()">×”×›× ×¡ ×œ×™×•××Ÿ ×”××©××¨×ª</button>
    </div>
    <div class="checklist-section">
      <div class="section-title" style="color: var(--red); border-bottom-color: rgba(220,38,38,0.3);">×¨×©×™××ª ×¡×˜×˜×•×¡ ×¤×¢×™×œ×”</div>
      <div id="prisonersListContainer"><p style="text-align:center; color:var(--gray); margin-top:20px;">××™×Ÿ ×¨×©×•××•×ª ×‘×™×•××Ÿ</p></div>
    </div>
  </div>
</div>

<div id="eventTypes" class="screen">
  <div class="header"><button class="back-btn" onclick="goBack('mainMenu')">&rarr;</button><span class="header-title">×¢×™×§×¨×•×Ÿ ×˜×™×¤×•×œ ×‘××™×¨×•×¢</span></div>
  <div class="checklist-content" id="eventTypesContainer"></div>
</div>

<div id="eventDetail" class="screen">
  <div class="header"><button class="back-btn" onclick="goBack('eventTypes')">&rarr;</button><span class="header-title" id="eventDetailTitle"></span></div>
  <div id="eventDetailContent"></div>
</div>

<div id="profile" class="screen">
  <div class="header"><button class="back-btn" onclick="goBack('mainMenu')">&rarr;</button><span class="header-title">×¤×¨×•×¤×™×œ ×ª×—× ×”</span></div>
  <div class="profile-content" id="profileContainer"></div>
</div>

<div id="adminModal" class="modal-overlay" onclick="if(event.target===this)closeAdminModal()">
  <div class="modal-box"><h3 style="color:#fff;">×”×–×“×”×•×ª ××¢×¨×›×ª</h3><p style="color:var(--gray); margin-bottom:10px;">×”×–×Ÿ ×§×•×“ ××‘×˜×—×”</p><input type="password" class="pin-input" id="pinInput" maxlength="4" inputmode="numeric" placeholder="----"><div class="modal-btns"><button class="btn-confirm" style="background:#333; color:var(--gray);" onclick="closeAdminModal()">×‘×™×˜×•×œ</button><button class="btn-confirm" onclick="verifyPin()">××™×©×•×¨</button></div></div>
</div>
<div class="toast" id="toast"></div>

<script>
var ADMIN_PIN = '1234';
var stationsData = {ashkelon:{name:'×ª×—× ×ª ××©×§×œ×•×Ÿ',area:'××¨×—×‘ ×œ×›×™×©',profile:{address:'×¨×—×³ ×”× ×©×™× 1, ××©×§×œ×•×Ÿ',phone:'08-6612222',fax:'08-6612233',commander:'×¡× ×´×¦ ×™×©×¨××œ ×›×”×Ÿ',dutyOfficer:'08-6612200',moked:'100',borders:['×¦×¤×•×Ÿ: × ×—×œ ×œ×›×™×© ×¢×“ ×¦×•××ª ××©×“×•×“','×“×¨×•×: × ×—×œ ×©×§××” ×¢×“ ×’×‘×•×œ ×¢×–×”','××–×¨×—: ×›×‘×™×© 4 - ×¦×•××ª ××©×§×œ×•×Ÿ','××¢×¨×‘: ×§×• ×—×•×£ ×”×™× ×”×ª×™×›×•×Ÿ']}},beersheva:{name:'×ª×—× ×ª ×‘××¨ ×©×‘×¢',area:'××¨×—×‘ ×”× ×’×‘',profile:{address:'×©×“×³ ×˜×•×‘×™×”×• 1, ×‘××¨ ×©×‘×¢',phone:'08-6468222',fax:'08-6468233',commander:'×¡× ×´×¦ ×“×•×“ ×œ×•×™',dutyOfficer:'08-6468200',moked:'100',borders:['×¦×¤×•×Ÿ: ×¦×•××ª ×©×•×§×ª ×¢×“ ×¦×•××ª ×œ×”×‘×™×','×“×¨×•×: ×¦×•××ª ×¢×¨×“ ×¢×“ ×ª×œ ×¢×¨×“','××–×¨×—: ×›×‘×™×© 40 - ×¦×•××ª ×›×¡×™×¤×”','××¢×¨×‘: ×›×‘×™×© 25 - ×¦×•××ª ×‘×™×ª ×§××”']}}};

var dutyTasks = {
  'â— ×“×’×©×™× ×§×¨×™×˜×™×™× ×œ××‘×—×Ÿ (×ª×‘×—×™×Ÿ)': [
    {id:'crit1', text:'* ×”×•×¤×¢×” ×•×™×™×¦×•×’×™×•×ª ××œ××”', desc:'××“×™× ××’×•×”×¦×™×, ×’×™×œ×•×—/×©×™×¢×¨, ×¦×—×¦×•×—, ×“×¨×’×•×ª, ×ª×’×™ ×©× ×•×ª×¢×•×“×ª ××™× ×•×™'},
    {id:'crit2', text:'* ×‘×“×™×§×ª ×¦×™×•×“ ××™×©×™ ×•× ×™×™×“×ª', desc:'×ª×§×™× ×•×ª ×§×©×¨, ×˜××‘×œ×˜, ×¤× ×¡, ××¤×•×“ ×–×•×”×¨ ×•×¦×™×•×“ ××™×©×™'},
    {id:'crit3', text:'* ×‘×§×™××•×ª ×‘×’×–×¨×” ×•×‘×ª×“×¨×™×š', desc:'×”×¤×’× ×ª ×©×œ×™×˜×” ×‘××™×¨×•×¢×™× ×’×–×¨×ª×™×™× ×•×§×‘×œ×ª ×“×’×©×™× ×‘×ª×“×¨×™×š'},
    {id:'crit4', text:'* ×”×’×¢×” ×œ×–×™×¨×”: ×“×™×•×•×— + ×ª××•× ×ª ××¦×‘', desc:'×“×™×•×•×— ×¨××©×•× ×™ ××”×™×¨ ×œ××©×œ"×˜ ×¢×œ ×”×’×¢×” ×•×ª××•× ×ª ××¦×‘ ×¨××©×•× ×™×ª'},
    {id:'crit5', text:'* ×¡×’×™×¨×ª ×–×™×¨×” ×”×¨××˜×™×ª', desc:'×©×™××•×© ×‘×¡×¨×˜×™ ×¡×™××•×Ÿ, ×”×¨×—×§×ª ×¡×§×¨× ×™× ×•×× ×™×¢×ª ×–×™×”×•× ×”×–×™×¨×”'},
    {id:'crit6', text:'* ×”×¤×¢×œ×ª ×›×•×— ×•×©×œ×™×˜×”', desc:'×—×œ×•×§×ª ×’×–×¨×•×ª ×•××©×™××•×ª ×‘×¨×•×¨×•×ª ×œ×©×•×˜×¨×™×/××ª× ×“×‘×™×'},
    {id:'crit7', text:'* ×”×¤×’× ×ª ×× ×”×™×’×•×ª ×•×§×•×¨ ×¨×•×—', desc:'×ª×¤×§×•×“ ×¨×’×•×¢ ×ª×—×ª ×œ×—×¥, ×§×‘×œ×ª ×”×—×œ×˜×•×ª ×¢× ×™×™× ×™×ª ×•××¡×¨×˜×™×‘×™×•×ª'},
    {id:'crit8', text:'* ×××™× ×•×ª ×•×“×™×•×•×—', desc:'×“×™×•×•×— ×××ª, ×××™× ×•×ª ××œ××” ×•×¨×™×©×•× ×“×•×—×•×ª ××¤×•×¨×˜'}
  ],
  '×œ×¤× ×™ ×”××©××¨×ª': [
    {id:'t1',text:'×”×ª×™×™×¦×‘×•×ª ××•×œ ××ª"×— / ×§.××’"×',desc:'×§×‘×œ×ª ×ª×“×¨×•×š ×•×ª×™×§ ×§.×ª×•×¨×Ÿ (××¢×•×“×›×Ÿ)'},
    {id:'t2',text:'× ×”×œ×™ ×ª×—× ×”, ××“×™× ×™×•×ª ××¤×§×“, × ×”×œ×™ ×“×™×•×•×—',desc:'×œ×™××•×“ ×•×”×›×¨×ª × ×”×œ×™× ×¢×“×›× ×™×™×'},
    {id:'t3',text:'×‘×“×™×§×” ×œ×’×‘×™ ××¦×‘ ×©×•×˜×£',desc:'×“.×—, ××¢×¦×¨×™×, ×–×™××•×Ÿ ×—×©×•×“×™×, ×™×“×™×¢×•×ª, ×××•×™××™×, ×¡×“"×›, ×™×¡"×, ×ª×’×‘×•×¨, × ×™×™×“×•×ª, ××ª×§× ×™×, ×’×‘×•×œ×•×ª ×’×–×¨×”, ×›×•×—×•×ª ×•××™×¨×•×¢×™× × ×•×¡×¤×™×'},
    {id:'t4',text:'×—×‘×™×¨×” ×œ×™×•×× ××™ ×•×‘×“×™×§×ª ×××¦×¢×™×',desc:'×™×•×× ×™×, × ×©×§×™×, ×§×©×¨×™×, ×¨×›×‘×™×, ×¦×™×•×“, ××¨×•×Ÿ ××•×¦×’×™×, ×¡×“"×› ×›×•×—×•×ª (×•××¡×¤×¨×™ ×¤×œ××¤×•×Ÿ)'},
    {id:'t5',text:'×“×¨×›×™ ×ª×§×©×•×¨×ª ×•×—×‘×™×¨×” ×œ×‘×¢×œ×™ ×ª×¤×§×™×“×™×',desc:'×§×¦×™×Ÿ ×—×§×™×¨×•×ª, ×§×¦×™×Ÿ ×‘×™×œ×•×©, ×§×¦×™×Ÿ ×¡×™×•×¨'},
    {id:'t6',text:'×—×¤×™×¤×”',desc:'××™×¨×•×¢×™× ××ª××©×›×™× / ×—×¨×™×’×™×, ×¢×¦×•×¨×™×, ×¡×˜×˜×•×¡ ×××•×™××™×'},
    {id:'t7',text:'×—×‘×™×¨×” ×œ×¨××© ××©××¨×ª',desc:'×•×™×“×•× ×¡×“"×›×™×, ×¤×¢×¨×™× ×•××©×™××•×ª ××ª×•×›× × ×•×ª'},
    {id:'t8',text:'×”×ª×™×™×¦×‘×•×ª ××•×œ ××©×œ"×˜',desc:'×“×™×•×•×— ××•×›× ×•×ª'}
  ],
  '×ª×•×š ×›×“×™ ××©××¨×ª': [
    {id:'t9',text:'×¢×¦×•×¨×™×',desc:'××—×™×¦×ª ××’×Ÿ, ××¡××›×™ ×¢×¦×•×¨×™×, ×§×™×•× ×ª× ××™× ×”×•×œ××™×, ×ª×™××•× ××¢×¦×¨ / × ×—×©×•×Ÿ'},
    {id:'t10',text:'× ×•×›×—×•×ª ×•×“×’×©×™× ×‘×ª×“×¨×™×š ×œ××©××¨×ª',desc:'×ª×“×¨×•×š ×›×•×—×•×ª × ×•×¡×¤×™× (××ª× ×“×‘×™× / ×¨×’×œ×™ / ×ª×’×‘×•×¨)'},
    {id:'t11',text:'×§×©×¨ ×¢× ×›×œ×œ ×’×•×¨××™ ×”×ª×—× ×”',desc:'× ×™×™×“×•×ª, ×‘×™×œ×•×©, ××©"×§×™×, ××ª× ×“×‘×™×, ×—×•×§×¨, ×ª×’×‘×•×¨, ×›×•×—×•×ª × ×•×¡×¤×™×'},
    {id:'t12',text:'×•×™×“×•× ×¦×™×•×•×ª×™× ××•×œ ××©×œ"×˜',desc:'×‘×“×™×§×ª ×©×™×‘×•×¦×™× ×•×ª×§×™× ×•×ª'},
    {id:'t13',text:'×‘×§×¨×” ×¢×œ ××¢×¨×š ××‘×˜×—×” ×•×–×§×™×¤×•×ª',desc:'×‘×™×§×•×¨×ª ×¤×™×–×™×ª ×‘× ×§×•×“×•×ª'},
    {id:'t14',text:'×‘×§×¨×” ×¢×œ ×‘×™×¦×•×¢ ××˜×œ×•×ª ××‘×¦×¢×™×•×ª',desc:'××¢×§×‘ ××—×¨ ×‘×™×¦×•×¢ ××©×™××•×ª'},
    {id:'t15',text:'×˜×™×¤×•×œ ×‘××–×¨×—×™×',desc:'×•×™×“×•× ××¢× ×” ×©×œ ×”×™×•××Ÿ / ××©"×œ / ×—×•×§×¨ ×ª×•×¨×Ÿ'},
    {id:'t16',text:'×§×™×•× ×ª×¨×’×™×œ',desc:'×œ× ×™×™×“×•×ª / ×™×•××Ÿ / ××©"×œ / ×—×•×§×¨ ×ª×•×¨×Ÿ'}
  ]
};

var eventTypes = [
{id:'almab',icon:'ğŸ ',color:'rgba(168,85,247,0.12)',title:'×¡×“"×¤ ×§×¦×™×Ÿ ×‘×˜×™×¤×•×œ ×‘××œ×"×‘',desc:'××œ×™××•×ª ×‘××©×¤×—×” - ×¡×“×¨ ×¤×¢×•×œ×•×ª',type:'steps',steps:[{title:'×”×¤×¨×“×•×ª',desc:'×™×© ×œ×•×•×“× ×”×¤×¨×“×” ×‘×™×Ÿ ×‘× ×™ ×”×–×•×’ ×•×œ×©××•×¢ ××ª ×’×¨×¡×ª× ×œ××™×¨×•×¢.'},{title:'× ×©×§',desc:'×œ×‘×“×•×§ ×× ×œ×—×©×•×“ × ×©×§ ×•×× ×›×Ÿ ×œ×“×¨×•×© ×ª×¤×™×¡×ª×• ×•×”×¢×‘×¨×ª×• ×œ×—×•×§×¨ ×ª×•×¨×Ÿ.'},{title:'×‘×—×™× ×ª ×”×–×™×¨×”',desc:'×‘××™×“×” ×•×™×© ×”×¨×¡ / ×¡×™×× ×™ ××œ×™××•×ª / ×¨××™×•×ª - ×™×© ×œ×¦×œ× ×•×œ×ª×¤×•×¡ ××ª ×”×¨××™×•×ª.'},{title:'××™×¨×•×¢×™× ×§×•×“××™×',desc:'×œ×‘×“×•×§ ×¢×‘×¨ ×¤×œ×™×œ×™ ×©×œ ×”××¢×•×¨×‘×™× ×‘×“×’×© ×¢×œ ×¨×¦×™×“×™×‘×™×–× ×‘××™×¨×•×¢×™× ×§×•×“××™×.'},{title:'×§×‘×œ×ª ×”×—×œ×˜×”',desc:'×”×× ×œ×¢×›×‘ / ×œ×¢×¦×•×¨ ××ª ××™ ××”××¢×•×¨×‘×™×. ×‘××™×“×” ×•××™×Ÿ ×¢×™×›×•×‘ - ×’×‘×™×™×ª ×¢×“×•×ª ×‘××™×“×ª ×”×¦×•×¨×š.'},{title:'×¨×•×•×—×”',desc:'×œ×¢×¨×‘ ×’×•×¨××™ ×¨×•×•×—×” ×‘××™×“×ª ×”×¦×•×¨×š.'},{title:'×”×¤× ×™×” ×œ××§×œ×˜ × ×©×™× ××•×›×•×ª',desc:'×‘××™×“×” ×•×”×™× ××¢×•× ×™×™× ×ª.'},{title:'×‘×“×™×§×” ×¢× ×”×—×•×§×¨ ×”××˜×¤×œ',desc:'×”×ª×¨×©××•×ª ×”×—×•×§×¨ ×”××˜×¤×œ.'},{title:'××™×œ×•×™ ×“×•×— ×”×¢×¨×›×ª ××¡×•×›× ×•×ª',desc:'×•×™×“×•× ×‘×™×¦×•×¢ ×©×œ ×”×—×•×§×¨.'},{title:'×‘×“×•×§ ×”×× ×”×—×©×•×“ ××—×–×™×§ ×‘× ×©×§',desc:'×ª×¤×•×¡ ×‘××™×“×ª ×”×¦×•×¨×š.'},{title:'×‘×“×•×§ ×“×•"×— ××¡×•×›× ×•×ª',desc:'×¡×§×™×¨×ª ×“×•×—×•×ª ×§×•×“××™×.'},{title:'×¢×¨×‘ ×’×•×¨××™ ×¨×•×•×—×”',desc:'×©×™×¨×•×ª×™ ×¨×•×•×—×”, ×§×‘"×¡.'},{title:'×‘×“×•×§ ×”×ª×¨×©××•×ª ×”×—×•×§×¨',desc:'××‘× ×™ ×”×–×•×’ ×•×”××™×¨×•×¢.'},{title:'×‘×“×•×§ ××™×¨×•×¢×™× ×§×•×“××™× ×•×¢×‘×¨ ×¤×œ×™×œ×™',desc:'×©×œ ×”××¢×•×¨×‘×™×.'},{title:'×‘××™×“×” ×•×”×•×—×œ×˜ ×œ×©×—×¨×¨',desc:'×‘×—×¨ ×—×œ×•×¤×ª ××¢×¦×¨ ××ª××™××”.'}]},
{id:'missing',icon:'ğŸ”',color:'rgba(59,130,246,0.12)',title:'×¡×“"×¤ ×§×¦×™×Ÿ ×‘×˜×™×¤×•×œ ×‘× ×¢×“×¨×™×',desc:'×˜×™×¤×•×œ ×‘××™×¨×•×¢ × ×¢×“×¨×™×',type:'steps',steps:[{title:'××™×“×¢',desc:'×§×‘×œ×ª ××™×¨×‘ ×”×¤×¨×˜×™× ××•×“×•×ª ×”× ×¢×“×¨ ××”×—×•×§×¨. ×‘××™×¨×•×¢ ×ª×’×•×‘×” ×”×¡×™×™×¨ ×™××¡×•×£ ××™×“×¢ ×¨××©×•× ×™ ××”××©×œ"×˜ ×•××”××•×“×™×¢.'},{title:'××•×“×™×¢',desc:'×—×‘×™×¨×” ×œ××•×“×™×¢, ×ª×—×§×•×¨ ×•×‘×™×¦×•×¢ ×”×¢×¨×›×ª ××¦×‘ ×¨××©×•× ×™×ª.'},{title:'×¢×“×•×™×•×ª',desc:'×’×‘×™×™×ª ×¢×“×•×ª ××¤×•×¨×˜×ª ××”××•×“×™×¢.'},{title:'× ×¢×“×¨ ×‘×¡×™×›×•×Ÿ',desc:'×‘×“×™×§×” ×¢× ×”××•×“×™×¢ ×”×× ×”× ×¢×“×¨ ×¡×•×‘×œ ×××—×œ×•×ª, ××¡×•×›×Ÿ ×œ×¢×¦××• ××• ×œ×¡×‘×™×‘×”.'},{title:'×ª××•× ×”',desc:'×œ×§×™×—×ª ×ª××•× ×•×ª ×¢×“×›× ×™×•×ª ×©×œ ×”× ×¢×“×¨ ×•×”×¤×¦×ª× ×‘×™×—×“ ×¢× ×ª×™××•×¨ ×”× ×¢×“×¨ ×œ×›×•×—×•×ª ×”×¨×œ×•×•× ×˜×™×™×.'},{title:'×¢×“×›×•×Ÿ ××¦×•×“×” ×‘××™×¨×•×¢',desc:'×œ×¢×œ×•×ª ××•×œ ××¦×•×“×” ×•×œ×¢×“×›×Ÿ ×‘××™×¨×•×¢ ×•×›×Ÿ ×œ×‘×“×•×§ ××™×¨×•×¢×™× ×§×•×“××™× ×•××•×“×™×¢×™× ×™×ª ×¢×œ ×”× ×¢×“×¨.'},{title:'×¡×¨×™×§×•×ª',desc:'×‘×™×¦×•×¢ ×¡×¨×™×§×•×ª ×¢×¤"×™ ××•×“×œ ×”××¢×’×œ×™×.'},{title:'×‘×ª×™ ×—×•×œ×™×',desc:'×‘×“×™×§×ª ×‘×ª×™ ×—×•×œ×™× ×‘×’×–×¨×” ×”×× ×”×’×™×¢ ××˜×•×¤×œ ×× ×•× ×™××™.'},{title:'××™×›×•×Ÿ',desc:'××™×›×•×Ÿ ×˜×œ×¤×•× ×™ ×‘××™×“×” ×•×™×© ×—×©×© ×œ×—×™×™ ×”× ×¢×“×¨. ××™×ª×•×¨, ×¤×œ×˜ ×©×™×—×•×ª, ××¢×§×‘ ××©×¨××™, ×¢×™×Ÿ ×”× ×¥, ×¨×‘ ×§×•.'},{title:'×—×‘×™×¨×” ×•×–×™×”×•×™',desc:'×‘×¨×’×¢ ×©×”× ×¢×“×¨ ××•×ª×¨ - ×—×‘×™×¨×” ×¤×™×–×™×ª, ×”×‘× ×ª ×¡×™×¤×•×¨ ×”××§×¨×”, ×–×™×”×•×™ ×¢×œ ×™×“×™ ×ª×¢×•×“×” ××–×”×”.'},{title:'×¤×ª×™×—×ª ×™×•××Ÿ ××‘×¦×¨',desc:'×‘××™×“×” ×•×”× ×¢×“×¨ ×œ× ××•×ª×¨ ×‘×–××Ÿ ×¡×‘×™×¨.'},{title:'×’×‘×™×™×ª ×¢×“×•×™×•×ª ××”××¢×’×œ ×”×§×¨×•×‘',desc:'×—×§×™×¨×ª ×§×¨×•×‘×™× ×•××›×¨×™×.'},{title:'×§×˜×™×Ÿ - ×¢×“×›×•×Ÿ ××—×œ×§ × ×•×¢×¨',desc:'×—×•×‘×” ×œ×¢×“×›×Ÿ.'},{title:'×”×¢×‘×¨×ª ×“×™×•×•×— ×œ×¡×™×•×¨',desc:'×‘×¦×™×¨×•×£ ×ª××•× ×” ×•×ª×™××•×¨ ×—×™×¦×•× ×™ ×•××§×•××•×ª ××¤×©×¨×™×™× ×œ××™×ª×•×¨.'},{title:'×“×™×•×•×— ×œ×—×•×œ×™×™×ª × ×¢×“×¨×™× ×•×œ××©×œ"×˜',desc:'××¨×—×‘×™ / ××—×•×–×™.'},{title:'×—×™×¤×•×© ×‘×××’×¨×™ ××™×“×¢',desc:'××™×›×•× ×™×, ××©×¨××™, ×—×©×‘×•× ×•×ª ×‘× ×§, ××¦×œ××•×ª ××‘×˜×—×”, ××™×ª×•×¨××Ÿ.'},{title:'×‘×“×™×§×” ×‘××•×¡×“×•×ª ×¨×¤×•××™×™×',desc:'×‘×ª×™ ×—×•×œ×™×, ××¨×¤××•×ª ×‘××–×•×¨.'},{title:'×”×–×¢×§×ª ×›×•×—×•×ª ×¡×™×•×¢',desc:'××¡×•×§×™×, ×¤×¨×©×™×.'},{title:'×”×¢×‘×¨×ª ×“×™×•×•×— ×œ×™×—×™×“×•×ª × ×•×¡×¤×•×ª',desc:'×‘×”×ª×× ×œ× ×¡×™×‘×•×ª.'},{title:'×¤×¨×¡×•××™×',desc:'×‘×××¦×¢×•×ª ×—×•×œ×™×™×ª × ×¢×“×¨×™×.'}]},
{id:'death',icon:'âš°ï¸',color:'rgba(107,114,128,0.15)',title:'×¡×“"×¤ ×§×¦×™×Ÿ ×‘×¢×‘×™×¨×ª ×"×',desc:'××§×¨×” ××•×•×ª - ×¡×“×¨ ×¤×¢×•×œ×•×ª',type:'steps',steps:[{title:'××¡××›×™ ×©×—×¨×•×¨ ×’×•×¤×”',desc:'×”×‘××ª 2 ××¡××›×™ ×©×—×¨×•×¨ ×’×•×¤×” ×•××–×›×¨×™× ×œ××™×¨×•×¢.'},{title:'×ª×¢×•×“×ª ×¤×˜×™×¨×”',desc:'×§×‘×œ×ª ×ª×¢×•×“×ª ×¤×˜×™×¨×” ×××“"×.'},{title:'×–×™×”×•×™ ×”× ×¤×˜×¨',desc:'×–×™×”×•×™ ×¢×œ ×™×“×™ ×ª.×–, ×“×¨×›×•×Ÿ, ×ª×¢×•×“×” ××–×”×” ××—×¨×ª ×¢× ×ª××•× ×”.'},{title:'×¢×“×•×™×•×ª',desc:'×’×‘×™×™×ª ×¢×“×•×™×•×ª ××× ×©×™× (×‘×“"×› ×§×¨×•×‘×™ ××©×¤×—×” ××“×¨×’×” ×¨××©×•× ×”) ×©×™×›×•×œ×™× ×œ×©×¤×•×š ××•×¨ ×¢×œ ×¡×™×‘×•×ª ×”××•×•×ª.'},{title:'×‘×“×™×§×” ×—×™×¦×•× ×™×ª ×©×œ ×”×’×•×¤×”',desc:'×‘×—×™× ×” ×—×™×¦×•× ×™×ª ×œ×©×œ×™×œ×ª ×¤×œ×™×œ×™.'},{title:'×¡×¨×™×§×ª ×–×™×¨×”',desc:'××™×ª×•×¨ ×—×¤×¦×™× ×©×™×›×•×œ×™× ×œ×©×¤×•×š ××•×¨ ×¢×œ × ×¡×™×‘×•×ª ×”××•×•×ª.'},{title:'×“×™×•×•×—',desc:'×“×™×•×•×— ×•×§×‘×œ×ª ××™×©×•×¨×™× ××”×¨×œ"×— ×”××¨×—×‘×™.'},{title:'× ×ª×™×—×”',desc:'×©××™×œ×ª ×”××©×¤×—×” ×‘× ×•×’×¢ ×œ× ×ª×™×—×”.'},{title:'×“×•×—×•×ª',desc:'×¨×™×©×•× ×“×•×—×•×ª ×•××™×œ×•×™ ×˜×¤×¡×™×.'},{title:'×©×™×¨×•×ª',desc:'×’×™×©×ª ×©×™×¨×•×ª×™×ª - ×”××©×¤×—×” ×‘××‘×œ, ×™×© ×œ×”×‘×™×Ÿ ×•×œ×”×›×™×œ.'},{title:'×‘×“×™×§×ª ×¡×™×× ×™ ×¤×¨×™×¦×” ×œ×“×™×¨×”',desc:'×‘×“×™×§×ª ×¡×™×× ×™× ×‘×–×™×¨×”.'},{title:'×¡×™×× ×™ ×¤×¦×™×¢×” ×¢×œ ×”×’×•×¤×”',desc:'×ª×™×¢×•×“ ×›×œ ×¡×™××Ÿ ×—×©×•×“.'},{title:'×¡×™×× ×™ ×©×§×™×¢×ª ×“× ×‘×’×•×¤×”',desc:'×‘×“×™×§×” ×•×”×ª×××” ×œ××™×§×•×.'},{title:'×¡×™×× ×™ ×××‘×§ ×‘×–×™×¨×” / ×’×•×¤×”',desc:'×‘×—×™× ×ª ×¡×™×× ×™× ×¤×™×–×™×™×.'},{title:'××¦×‘ ×¨×¤×•××™ ×©×œ ×”× ×¤×˜×¨ ×˜×¨× ××•×ª×•',desc:'×‘×™×¨×•×¨ ××¦×‘ ×‘×¨×™××•×ª×™ ×§×•×“×.'},{title:'×¢×“×•×™×•×ª ×¡×•×ª×¨×•×ª',desc:'×”×©×•×•××ª ×’×¨×¡××•×ª ×‘×™×Ÿ ×¢×“×™×.'},{title:'×××‘×§×™ ×™×¨×•×©×”',desc:'×‘×“×™×§×ª ×× ×™×¢×™× ×›×œ×›×œ×™×™×.'},{title:'×××™×¨×•×ª ××¢×•×¨×‘×™× ×©××¢×œ×•×ª ×—×©×“',desc:'×ª×™×¢×•×“ ×•×“×™×•×•×—.'}]}
];

var currentStation = null;
var checkedTasks = {};

function showScreen(screenId) { 
  var screens = document.querySelectorAll('.screen'); 
  for (var i = 0; i < screens.length; i++) { screens[i].classList.remove('active'); } 
  document.getElementById(screenId).classList.add('active'); 
  window.scrollTo(0, 0); 
  if (screenId === 'mainMenu') { renderMainMenu(); } 
  if (screenId === 'dutyTasks') { renderChecklist(); } 
  if (screenId === 'eventTypes') { renderEventTypes(); } 
  if (screenId === 'profile') { renderProfile(); } 
  if (screenId === 'manpower') { renderManpowerList(); }
  if (screenId === 'atzurim') { 
    var now = new Date();
    document.getElementById('pTime').value = ("0"+now.getHours()).slice(-2)+":"+("0"+now.getMinutes()).slice(-2);
  }
}

function goBack(t) { showScreen(t); }
function selectStation(id) { currentStation = id; saveState(); showScreen('mainMenu'); }

function renderMainMenu() { if (!currentStation) return; document.getElementById('menuStationName').textContent = stationsData[currentStation].name; var now = new Date(); var days = ['×¨××©×•×Ÿ','×©× ×™','×©×œ×™×©×™','×¨×‘×™×¢×™','×—××™×©×™','×©×™×©×™','×©×‘×ª']; var months = ['×™× ×•××¨','×¤×‘×¨×•××¨','××¨×¥','××¤×¨×™×œ','×××™','×™×•× ×™','×™×•×œ×™','××•×’×•×¡×˜','×¡×¤×˜××‘×¨','××•×§×˜×•×‘×¨','× ×•×‘××‘×¨','×“×¦××‘×¨']; document.getElementById('currentDate').textContent = '×™×•× ' + days[now.getDay()] + ', ' + now.getDate() + ' ' + months[now.getMonth()] + ' ' + now.getFullYear(); }

function renderChecklist() {
  var container = document.getElementById('checklistContainer'); container.innerHTML = ''; var total = 0; var checked = 0; var sections = Object.keys(dutyTasks);
  for (var s = 0; s < sections.length; s++) { var sectionName = sections[s]; var tasks = dutyTasks[sectionName]; var sectionEl = document.createElement('div'); sectionEl.className = 'checklist-section'; sectionEl.innerHTML = '<div class="section-title">' + sectionName + '</div>';
    for (var i = 0; i < tasks.length; i++) { var task = tasks[i]; total++; var isChecked = checkedTasks[task.id]; if (isChecked) checked++;
      var item = document.createElement('div'); item.className = 'checklist-item' + (isChecked ? ' checked' : ''); item.onclick = (function(taskId) { return function() { toggleTask(taskId); }; })(task.id);
      var html = '<div class="check-box">' + (isChecked ? '&#10003;' : '') + '</div><div class="check-text"><h4 style="color:'+(task.text.includes('*')?'var(--gold)':'#fff')+'">' + task.text + '</h4><p>' + task.desc + '</p></div>'; if (isChecked) { html += '<span class="check-time">' + checkedTasks[task.id] + '</span>'; } item.innerHTML = html; sectionEl.appendChild(item); } container.appendChild(sectionEl); }
  var pct = total > 0 ? Math.round((checked / total) * 100) : 0; document.getElementById('taskCount').textContent = checked + '/' + total; document.getElementById('progressPercent').textContent = pct + '%'; document.getElementById('progressFill').style.width = pct + '%';
}

function toggleTask(taskId) { if (checkedTasks[taskId]) { delete checkedTasks[taskId]; } else { var now = new Date(); checkedTasks[taskId] = ("0"+now.getHours()).slice(-2)+":"+("0"+now.getMinutes()).slice(-2); } saveState(); renderChecklist(); }
function resetChecklist() { if (confirm('×œ××¤×¡ ××ª ×›×œ ×”××©×™××•×ª? (×¤×¢×•×œ×” ×–×• ×œ× × ×™×ª× ×ª ×œ×‘×™×˜×•×œ)')) { checkedTasks = {}; saveState(); renderChecklist(); showToast('×”××©×™××•×ª ××•×¤×¡×• ×‘×”×¦×œ×—×”'); } }

function renderEventTypes() { var container = document.getElementById('eventTypesContainer'); container.innerHTML = ''; for (var i = 0; i < eventTypes.length; i++) { var ev = eventTypes[i]; var card = document.createElement('div'); card.className = 'event-card'; card.onclick = (function(event) { return function() { showEventDetail(event); }; })(ev); card.innerHTML = '<div class="event-header"><h3>' + ev.title + '</h3></div><p>' + ev.desc + '</p>'; container.appendChild(card); } }

function showEventDetail(event) {
  document.getElementById('eventDetailTitle').textContent = event.title; var content = document.getElementById('eventDetailContent'); content.innerHTML = '';
  if (event.type === 'steps') { var html = '<div style="padding: 20px;">'; for (var i = 0; i < event.steps.length; i++) { var step = event.steps[i]; html += '<div class="step-item" style="animation: slideUp 0.4s ease ' + (i * 0.05) + 's both"><div class="step-number">' + (i + 1) + '</div><div class="step-content"><h4>' + step.title + '</h4><p>' + step.desc + '</p></div></div>'; } html += '</div>'; content.innerHTML = html; }
  showScreen('eventDetail');
}

function renderProfile() { if (!currentStation) return; var station = stationsData[currentStation]; var p = station.profile; var html = '<div class="profile-card"><h3>×¤×¨×˜×™× ×›×œ×œ×™×™×</h3><div class="profile-row"><span class="label">×©× ×ª×—× ×”</span><span class="value">' + station.name + '</span></div><div class="profile-row"><span class="label">××¨×—×‘</span><span class="value">' + station.area + '</span></div><div class="profile-row"><span class="label">×›×ª×•×‘×ª</span><span class="value">' + p.address + '</span></div><div class="profile-row"><span class="label">××¤×§×“ ×ª×—× ×”</span><span class="value">' + p.commander + '</span></div></div><div class="profile-card"><h3>×˜×œ×¤×•× ×™× ××‘×¦×¢×™×™×</h3><div class="profile-row"><span class="label">×˜×œ×¤×•×Ÿ ×ª×—× ×”</span><span class="value phone">' + p.phone + '</span></div><div class="profile-row"><span class="label">×¤×§×¡</span><span class="value phone">' + p.fax + '</span></div><div class="profile-row"><span class="label">×§×¦×™×Ÿ ×ª×•×¨×Ÿ</span><span class="value phone">' + p.dutyOfficer + '</span></div><div class="profile-row"><span class="label">××•×§×“</span><span class="value phone">' + p.moked + '</span></div></div><div class="profile-card"><h3>×’×‘×•×œ×•×ª ×’×–×¨×”</h3>'; for (var i = 0; i < p.borders.length; i++) { html += '<div style="background: rgba(255,255,255,0.05); padding: 8px 12px; margin-bottom:8px; border-radius:4px; font-size:13px; border-right:2px solid var(--blue-light);">' + p.borders[i] + '</div>'; } html += '</div>'; document.getElementById('profileContainer').innerHTML = html; }

function showAdminModal() { document.getElementById('adminModal').classList.add('show'); document.getElementById('pinInput').value = ''; document.getElementById('pinInput').classList.remove('error'); setTimeout(function() { document.getElementById('pinInput').focus(); }, 300); }
function closeAdminModal() { document.getElementById('adminModal').classList.remove('show'); }
function verifyPin() { var pin = document.getElementById('pinInput').value; if (pin === ADMIN_PIN) { closeAdminModal(); showToast('××¦×‘ × ×™×”×•×œ ×”×•×¤×¢×œ ×‘×”×¦×œ×—×”'); } else { document.getElementById('pinInput').classList.add('error'); setTimeout(function() { document.getElementById('pinInput').classList.remove('error'); }, 500); } }
document.getElementById('pinInput').addEventListener('keyup', function(e) { if (e.key === 'Enter') { verifyPin(); } });
function showToast(msg) { var toast = document.getElementById('toast'); toast.textContent = msg; toast.classList.add('show'); setTimeout(function() { toast.classList.remove('show'); }, 2500); }

// × ×™×”×•×œ ×¢×¦×•×¨×™×
var prisoners = [];
function loadPrisoners() { try { var savedP = localStorage.getItem('tafmak_prisoners'); if (savedP) { prisoners = JSON.parse(savedP); renderPrisonersList(); } } catch(e) {} }
function savePrisoners() { localStorage.setItem('tafmak_prisoners', JSON.stringify(prisoners)); }
function addPrisoner() {
  var name = document.getElementById('pName').value, gender = document.getElementById('pGender').value, age = document.getElementById('pAge').value, offense = document.getElementById('pOffense').value, type = document.getElementById('pType').value, time = document.getElementById('pTime').value;
  if (!name || !time || !offense) { showToast('×©×’×™××”: ×—×¡×¨×™× ×¤×¨×˜×™ ×—×•×‘×”'); return; }
  prisoners.unshift({ id: Date.now(), name: name, gender: gender, age: age, offense: offense, type: type, time: time });
  savePrisoners(); renderPrisonersList();
  document.getElementById('pName').value = ''; document.getElementById('pAge').value = ''; document.getElementById('pOffense').value = ''; showToast('× ×¨×©× ×‘×™×•××Ÿ ×‘×”×¦×œ×—×”');
}
function deletePrisoner(id) { if (confirm('×œ××—×•×§ ×¨×™×©×•× ×–×” ××”×™×•××Ÿ?')) { prisoners = prisoners.filter(function(p) { return p.id !== id; }); savePrisoners(); renderPrisonersList(); } }
function renderPrisonersList() {
  var container = document.getElementById('prisonersListContainer');
  if (prisoners.length === 0) { container.innerHTML = '<p style="text-align:center; color:var(--gray); margin-top:20px;">××™×Ÿ ×¨×©×•××•×ª ×‘×™×•××Ÿ</p>'; return; }
  var html = '';
  for (var i = 0; i < prisoners.length; i++) {
    var p = prisoners[i], typeText = p.type === 'atzur' ? '×¢×¦×•×¨' : '××¢×•×›×‘', ageText = p.age ? ' | ' + p.age : '';
    html += '<div class="prisoner-card ' + p.type + '"><div class="p-info">';
    html += '<div style="display:flex; justify-content:space-between; align-items:start;"><h4>' + p.name + ' <span style="font-weight:400; font-size:14px; color:var(--gray)">' + ageText + '</span></h4><button class="btn-delete" onclick="deletePrisoner(' + p.id + ')">ğŸ—‘ï¸</button></div>';
    html += '<div style="color:#fff; font-size:14px; margin:4px 0;">×¢×‘×™×¨×”: ' + p.offense + '</div>';
    html += '<div class="p-tech">×¡×˜×˜×•×¡: ' + typeText + ' (' + p.gender + ') | ×§×œ×™×˜×”: <span style="color:var(--gold)">' + p.time + '</span></div>';
    html += '</div></div>';
  } container.innerHTML = html;
}

// × ×™×”×•×œ ×›×•×— ××“×
var manpower = [];
function loadManpower() { try { var savedM = localStorage.getItem('tafmak_manpower'); if (savedM) { manpower = JSON.parse(savedM); renderManpowerList(); } } catch(e) {} }
function saveManpower() { localStorage.setItem('tafmak_manpower', JSON.stringify(manpower)); }
function addManpowerItem() {
  var mission = document.getElementById('mpMission').value, callSign = document.getElementById('mpCallSign').value, officers = document.getElementById('mpOfficers').value;
  if (!mission) { showToast('×©×’×™××”: ×—×•×‘×” ×œ×”×–×™×Ÿ ×©× ××©×™××”'); return; }
  manpower.unshift({ id: Date.now(), mission: mission, callSign: callSign || '×œ×œ× ×§×•×“', officers: officers || '×›×•×— ×œ× ××¤×•×¨×˜' });
  saveManpower(); renderManpowerList();
  document.getElementById('mpMission').value = ''; document.getElementById('mpCallSign').value = ''; document.getElementById('mpOfficers').value = ''; showToast('×”×›×•×— ×©×•×’×¨ ×‘×”×¦×œ×—×”');
}
function deleteManpowerItem(id) { if (confirm('×œ××—×•×§ ××©×™××” ×–×•?')) { manpower = manpower.filter(function(item) { return item.id !== id; }); saveManpower(); renderManpowerList(); } }
function renderManpowerList() {
  var container = document.getElementById('manpowerListContainer');
  if (manpower.length === 0) { container.innerHTML = '<p style="text-align:center; color:var(--gray); margin-top:20px;">××™×Ÿ ×›×•×—×•×ª ××©×•×‘×¦×™×</p>'; return; }
  var html = '';
  for (var i = 0; i < manpower.length; i++) {
    var item = manpower[i];
    html += '<div class="manpower-card"><div class="p-info">';
    html += '<div style="display:flex; justify-content:space-between; align-items:start;"><h4>' + item.mission + ' <span style="background:var(--cyan); color:#000; padding:2px 6px; border-radius:3px; font-size:12px; margin-right:8px; font-family:monospace;">×§×©×¨: ' + item.callSign + '</span></h4><button class="btn-delete" onclick="deleteManpowerItem(' + item.id + ')">ğŸ—‘ï¸</button></div>';
    html += '<div style="color:var(--gray); font-size:14px; margin-top:6px; line-height:1.5;">' + item.officers.replace(/\n/g, '<br>') + '</div>';
    html += '</div></div>';
  } container.innerHTML = html;
}

function loadState() { try { var saved = localStorage.getItem('tafmak_checked'); if (saved) { checkedTasks = JSON.parse(saved); } localStorage.removeItem('tafmak_station'); loadPrisoners(); loadManpower(); } catch(e) {} }
function saveState() { try { localStorage.setItem('tafmak_checked', JSON.stringify(checkedTasks)); } catch(e) {} }

loadState();
</script>
</body>
</html>
